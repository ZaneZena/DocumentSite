<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ğŸŒˆ NODEåŸºç¡€ | æ¸…ç™½ä¹‹æœˆ</title>
    <meta name="description" content="ä½ æ˜¯å¦å¾—åˆ°äº†æœŸå¾…çš„äººç”Ÿ">
    <meta name="generator" content="VitePress v1.2.3">
    <link rel="preload stylesheet" href="/DocumentSite/assets/style.e5bvweht.css" as="style">
    
    <script type="module" src="/DocumentSite/assets/app.BSOKBFt2.js"></script>
    <link rel="preload" href="/DocumentSite/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/DocumentSite/assets/chunks/framework.C_bjHMch.js">
    <link rel="modulepreload" href="/DocumentSite/assets/chunks/theme.DzQkvkBJ.js">
    <link rel="modulepreload" href="/DocumentSite/assets/serverend_Nodejs_index.md.DZF6ZfJD.lean.js">
    <link rel="icon" href="./site.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar has-sidebar top" data-v-ae24b3ad data-v-ccf7ddec><div class="wrapper" data-v-ccf7ddec><div class="container" data-v-ccf7ddec><div class="title" data-v-ccf7ddec><div class="VPNavBarTitle has-sidebar" data-v-ccf7ddec data-v-ab179fa1><a class="title" href="/DocumentSite/" data-v-ab179fa1><!--[--><!--]--><!--[--><img class="VPImage logo" src="/DocumentSite/hero-logo.svg" alt data-v-8426fc1a><!--]--><span data-v-ab179fa1>æ¸…ç™½ä¹‹æœˆ</span><!--[--><!--]--></a></div></div><div class="content" data-v-ccf7ddec><div class="content-body" data-v-ccf7ddec><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ccf7ddec><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ccf7ddec data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>å‰ç«¯</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/DocumentSite/frontend/Vue2/index" data-v-43f1e123><!--[-->VUE 2.x<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/DocumentSite/frontend/Vue3/index" data-v-43f1e123><!--[-->VUE 3.x<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/DocumentSite/frontend/Typescript/index" data-v-43f1e123><!--[-->Typescript<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/DocumentSite/frontend/React/index" data-v-43f1e123><!--[-->React<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>æœåŠ¡ç«¯</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/DocumentSite/serverend/Nodejs/index" data-v-43f1e123><!--[-->Nodejs<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/DocumentSite/serverend/Mongodb/index" data-v-43f1e123><!--[-->Mongodb<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/DocumentSite/serverend/Mysql/index" data-v-43f1e123><!--[-->Mysql<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/DocumentSite/serverend/Docker/index" data-v-43f1e123><!--[-->Docker<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/DocumentSite/serverend/cloud-services/README" data-v-43f1e123><!--[-->äº‘æœåŠ¡<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>å·¥å…·ç±»</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/DocumentSite/tools/Git/index" data-v-43f1e123><!--[-->Git<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/DocumentSite/" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>å‰æ²¿æŠ€æœ¯</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/DocumentSite/" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>éšç¬”</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-ccf7ddec data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-e6aabb21 data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-ccf7ddec data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://juejin.cn" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><svg t="1713408687091" class="icon" viewBox="0 0 1316 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7801" width="64" height="64"><path d="M643.181714 247.698286l154.916572-123.172572L643.181714 0.256 643.072 0l-154.660571 124.269714 154.660571 123.245715 0.109714 0.182857z m0 388.461714h0.109715l399.579428-315.245714-108.361143-87.04-291.218285 229.888h-0.146286l-0.109714 0.146285L351.817143 234.093714l-108.251429 87.04 399.433143 315.136 0.146286-0.146285z m-0.146285 215.552l0.146285-0.146286 534.893715-422.034285 108.397714 87.04-243.309714 192L643.145143 1024 10.422857 525.056 0 516.754286l108.251429-86.893715L643.035429 851.748571z" fill="#1E80FF" p-id="7802"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-ccf7ddec data-v-d0bd9dde data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-d0bd9dde><div class="item appearance" data-v-d0bd9dde><p class="label" data-v-d0bd9dde>Appearance</p><div class="appearance-action" data-v-d0bd9dde><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d0bd9dde data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div></div></div><div class="group" data-v-d0bd9dde><div class="item social-links" data-v-d0bd9dde><div class="VPSocialLinks social-links-list" data-v-d0bd9dde data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://juejin.cn" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><svg t="1713408687091" class="icon" viewBox="0 0 1316 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7801" width="64" height="64"><path d="M643.181714 247.698286l154.916572-123.172572L643.181714 0.256 643.072 0l-154.660571 124.269714 154.660571 123.245715 0.109714 0.182857z m0 388.461714h0.109715l399.579428-315.245714-108.361143-87.04-291.218285 229.888h-0.146286l-0.109714 0.146285L351.817143 234.093714l-108.251429 87.04 399.433143 315.136 0.146286-0.146285z m-0.146285 215.552l0.146285-0.146286 534.893715-422.034285 108.397714 87.04-243.309714 192L643.145143 1024 10.422857 525.056 0 516.754286l108.251429-86.893715L643.035429 851.748571z" fill="#1E80FF" p-id="7802"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ccf7ddec data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-ccf7ddec><div class="divider-line" data-v-ccf7ddec></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-575e6a36><div class="curtain" data-v-575e6a36></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-575e6a36><span class="visually-hidden" id="sidebar-aria-label" data-v-575e6a36> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 collapsible" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><h2 class="text" data-v-b8d55f3b>å‰ç«¯</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b8d55f3b><span class="vpi-chevron-right caret-icon" data-v-b8d55f3b></span></div></div><div class="items" data-v-b8d55f3b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/frontend/README" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>README</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/frontend/Vue2/index" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Vue 2.x</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/frontend/Vue3/index" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Vue 3.x</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/frontend/Typescript/index" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Typescript</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/frontend/React/index" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>React</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 collapsible has-active" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><h2 class="text" data-v-b8d55f3b>æœåŠ¡ç«¯</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b8d55f3b><span class="vpi-chevron-right caret-icon" data-v-b8d55f3b></span></div></div><div class="items" data-v-b8d55f3b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/serverend/README" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>README</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/serverend/Nodejs/index" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Nodejs</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-b8d55f3b data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><h3 class="text" data-v-b8d55f3b>Mysql</h3><!----></div><div class="items" data-v-b8d55f3b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/serverend/Mysql/index" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Mysql</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/serverend/Mysql/mysql" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>MysqlæŸ¥è¯¢</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/serverend/Mongodb/index" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Mongodb</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/serverend/Docker/index" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Docker</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/serverend/cloud-services/README" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>äº‘æœåŠ¡</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 collapsible" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><h2 class="text" data-v-b8d55f3b>å·¥å…·ç±»</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b8d55f3b><span class="vpi-chevron-right caret-icon" data-v-b8d55f3b></span></div></div><div class="items" data-v-b8d55f3b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/tools/README" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>README</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-b8d55f3b data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><h3 class="text" data-v-b8d55f3b>Git</h3><!----></div><div class="items" data-v-b8d55f3b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/tools/Git/index" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Git</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/DocumentSite/tools/Git/git-vim" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Git/Vimå¸¸ç”¨å‘½ä»¤</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>å‰æ²¿æŠ€æœ¯</p><!----></div><!----></div></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>éšç¬”</p><!----></div><!----></div></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _DocumentSite_serverend_Nodejs_" data-v-39a288b8><div><h1 id="ğŸŒˆ-nodeåŸºç¡€" tabindex="-1">ğŸŒˆ <strong>NODEåŸºç¡€</strong> <a class="header-anchor" href="#ğŸŒˆ-nodeåŸºç¡€" aria-label="Permalink to &quot;ğŸŒˆ **NODEåŸºç¡€**&quot;">â€‹</a></h1><h2 id="ä¸€-nodeå…¥é—¨åŸºç¡€çŸ¥è¯†ä¸è¯­æ³•" tabindex="-1">ä¸€.nodeå…¥é—¨åŸºç¡€çŸ¥è¯†ä¸è¯­æ³• <a class="header-anchor" href="#ä¸€-nodeå…¥é—¨åŸºç¡€çŸ¥è¯†ä¸è¯­æ³•" aria-label="Permalink to &quot;ä¸€.nodeå…¥é—¨åŸºç¡€çŸ¥è¯†ä¸è¯­æ³•&quot;">â€‹</a></h2><h5 id="_1-nodeå®˜ç½‘apiæ–‡æ¡£" tabindex="-1">1.nodeå®˜ç½‘APIæ–‡æ¡£ <a class="header-anchor" href="#_1-nodeå®˜ç½‘apiæ–‡æ¡£" aria-label="Permalink to &quot;1.nodeå®˜ç½‘APIæ–‡æ¡£&quot;">â€‹</a></h5><p>â€‹ <a href="http://nodejs.cn/api/" target="_blank" rel="noreferrer">http://nodejs.cn/api/</a></p><h5 id="_2-æ§åˆ¶å°-å¯åŠ¨nodeé¡¹ç›®ä»£ç " tabindex="-1">2.æ§åˆ¶å° å¯åŠ¨nodeé¡¹ç›®ä»£ç  <a class="header-anchor" href="#_2-æ§åˆ¶å°-å¯åŠ¨nodeé¡¹ç›®ä»£ç " aria-label="Permalink to &quot;2.æ§åˆ¶å° å¯åŠ¨nodeé¡¹ç›®ä»£ç &quot;">â€‹</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>  npm run start</span></span></code></pre></div><h5 id="_3-jsèƒ½åšä¸ä¸èƒ½åšçš„äº‹æƒ…" tabindex="-1">3.JSèƒ½åšä¸ä¸èƒ½åšçš„äº‹æƒ…: <a class="header-anchor" href="#_3-jsèƒ½åšä¸ä¸èƒ½åšçš„äº‹æƒ…" aria-label="Permalink to &quot;3.JSèƒ½åšä¸ä¸èƒ½åšçš„äº‹æƒ…:&quot;">â€‹</a></h5><pre><code>	â‘ jsèƒ½åš:æ“ä½œcss  æ“ä½œdom æ‰§è¡Œå¸¸è§„å‡½æ•°æ–¹æ³• å‰åç«¯é€šä¿¡
</code></pre><p>â€‹ â‘¡jsä¸èƒ½åš:ä¸èƒ½é“¾æ¥æ•°æ®åº“æ“ä½œæ–‡ä»¶ç³»ç»Ÿ</p><h5 id="_4-node-async-å¼‚æ­¥-apiåŸºç¡€çŸ¥è¯†ç‚¹" tabindex="-1">4.node async(å¼‚æ­¥) apiåŸºç¡€çŸ¥è¯†ç‚¹: <a class="header-anchor" href="#_4-node-async-å¼‚æ­¥-apiåŸºç¡€çŸ¥è¯†ç‚¹" aria-label="Permalink to &quot;4.node async(å¼‚æ­¥) apiåŸºç¡€çŸ¥è¯†ç‚¹:&quot;">â€‹</a></h5><p>â€‹ â‘  åŒæ­¥æ˜¯è¯·æ±‚ä¸å“åº”åŒæ­¥åœ¨ä¸€èµ·,å¼‚æ­¥æ˜¯ä¸åœ¨ä¸€èµ·</p><p>â€‹ â‘¡ å›è°ƒå‡½æ•°çš„è‡³å°‘æœ‰ä¸€ä¸ªå½¢å‚,è€Œä¸”åœ¨ç¬¬ä¸€ä¸ªä½ç½®,è€Œä¸”æ˜¯error</p><h5 id="_5-é˜»å¡éé˜»å¡åŒºåˆ«" tabindex="-1">5.é˜»å¡éé˜»å¡åŒºåˆ« : <a class="header-anchor" href="#_5-é˜»å¡éé˜»å¡åŒºåˆ«" aria-label="Permalink to &quot;5.é˜»å¡éé˜»å¡åŒºåˆ« :&quot;">â€‹</a></h5><p>â€‹ â‘ å•çº¿ç¨‹é˜»å¡,å¤šçº¿ç¨‹éé˜»å¡</p><h2 id="äºŒ-åŸºäºå‘½ä»¤è¡Œçš„å®è¡Œç”Ÿæˆexpress" tabindex="-1">äºŒ.åŸºäºå‘½ä»¤è¡Œçš„å®è¡Œç”Ÿæˆexpress <a class="header-anchor" href="#äºŒ-åŸºäºå‘½ä»¤è¡Œçš„å®è¡Œç”Ÿæˆexpress" aria-label="Permalink to &quot;äºŒ.åŸºäºå‘½ä»¤è¡Œçš„å®è¡Œç”Ÿæˆexpress&quot;">â€‹</a></h2><p><code> 1ã€npm install express-generator -g</code><code> 2ã€express é¡¹ç›®åç§° // è¡¨ç¤ºåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªé¡¹ç›®</code></p><h2 id="ä¸‰-å¸¸ç”¨åŸºç¡€ä»£ç æ“ä½œ" tabindex="-1">ä¸‰.å¸¸ç”¨åŸºç¡€ä»£ç æ“ä½œ <a class="header-anchor" href="#ä¸‰-å¸¸ç”¨åŸºç¡€ä»£ç æ“ä½œ" aria-label="Permalink to &quot;ä¸‰.å¸¸ç”¨åŸºç¡€ä»£ç æ“ä½œ&quot;">â€‹</a></h2><h5 id="_1-å¼•ç”¨åŒ…" tabindex="-1">1. å¼•ç”¨åŒ… <a class="header-anchor" href="#_1-å¼•ç”¨åŒ…" aria-label="Permalink to &quot;1. å¼•ç”¨åŒ…&quot;">â€‹</a></h5><p><code>const mypackage= require(&#39;./mypachage&#39;);</code></p><h5 id="_2-æ–‡ä»¶æ“ä½œ" tabindex="-1">2.æ–‡ä»¶æ“ä½œ <a class="header-anchor" href="#_2-æ–‡ä»¶æ“ä½œ" aria-label="Permalink to &quot;2.æ–‡ä»¶æ“ä½œ&quot;">â€‹</a></h5><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//â‘ å†™å…¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./fs.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hong&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //é”™è¯¯ä¼˜å…ˆåŸåˆ™</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e);</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆåŠŸ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //åŒæ­¥fs.writeFileSync(&#39;./fs.txt&#39;,new Date())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//â‘¡è¯»å–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./fs.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e);</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h5 id="_3-åŒæ­¥å¼‚å¸¸æ•è·" tabindex="-1">3.åŒæ­¥å¼‚å¸¸æ•è· <a class="header-anchor" href="#_3-åŒæ­¥å¼‚å¸¸æ•è·" aria-label="Permalink to &quot;3.åŒæ­¥å¼‚å¸¸æ•è·&quot;">â€‹</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>try {</span></span>
<span class="line"><span>    let data=fs.readFileSync(&#39;./fs.txt&#39;)</span></span>
<span class="line"><span>    console.log(&quot;æˆåŠŸ&quot;);</span></span>
<span class="line"><span>    console.log(data.toString());</span></span>
<span class="line"><span>}catch (e) {</span></span>
<span class="line"><span>    console.error(&#39;å‡ºé”™&#39;);</span></span>
<span class="line"><span>}</span></span></code></pre></div><h5 id="_4-è·¯å¾„å‡½æ•°" tabindex="-1">4.è·¯å¾„å‡½æ•° <a class="header-anchor" href="#_4-è·¯å¾„å‡½æ•°" aria-label="Permalink to &quot;4.è·¯å¾„å‡½æ•°&quot;">â€‹</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>const  path=require(&#39;path&#39;);</span></span>
<span class="line"><span>//å‚æ•°ä¸­...æ˜¯å¯é€‰å‚æ•°(ä»»æ„)</span></span>
<span class="line"><span>console.log(path.join(&#39;a&#39;,&#39;../b&#39;,&#39;c&#39;))</span></span>
<span class="line"><span>console.log(path.basename(&#39;./fs.txt&#39;));</span></span>
<span class="line"><span>console.log(path.dirname(&#39;f./fs.txt&#39;));</span></span>
<span class="line"><span>console.log(path.extname(&#39;./fs.txt&#39;));*/</span></span>
<span class="line"><span>//è·å–å½“å‰ç›®å½•è·¯å¾„</span></span>
<span class="line"><span>console.log(__dirname);</span></span>
<span class="line"><span>//è·å–å½“å‰ç›®å½•æ–‡ä»¶è·¯å¾„,åŒ…æ‹¬å½“å‰è·¯å¾„</span></span>
<span class="line"><span>console.log(__filename);</span></span></code></pre></div><h5 id="_5-ç¾åŒ–æ—¥å¿—-åœ¨binåŒ…ä¸­çš„wwwæ›¿æ¢onlistening" tabindex="-1">5.ç¾åŒ–æ—¥å¿—=&gt;(åœ¨binåŒ…ä¸­çš„wwwæ›¿æ¢onListening) <a class="header-anchor" href="#_5-ç¾åŒ–æ—¥å¿—-åœ¨binåŒ…ä¸­çš„wwwæ›¿æ¢onlistening" aria-label="Permalink to &quot;5.ç¾åŒ–æ—¥å¿—=&gt;(åœ¨binåŒ…ä¸­çš„wwwæ›¿æ¢onListening)&quot;">â€‹</a></h5><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getPackageJson</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // console.log(&#39;----------------------1.å¼€å§‹è¯»å–package.json&#39;)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _packageJson </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./package.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // console.log(&#39;----------------------è¯»å–package.jsonæ–‡ä»¶å®Œæ¯•&#39;)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(_packageJson)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onListening</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> addr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bind </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> addr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;string&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;pipe &#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> addr</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;port &#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> addr.port;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#    _____                     .___</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#  _/ ____</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  ____    ____    __| _/  ____</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   __</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  /    </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  /  _ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  / __ | _/ __ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#   |  |   |   |  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(  &lt;_&gt; )/ /_/ | </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  ___/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#   |__|   |___|  / </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">____/ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">____ |  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">___  &gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#               </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/              </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/      </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=============================================</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">fnode :: (v0.0.1RELEASE)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`[SYSTERM]${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPackageJson</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">().</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}åº”ç”¨å¯åŠ¨ä¸­...`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`[SYSTERM]åº”ç”¨éƒ¨ç½²åœ¨${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bind</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h5 id="_6-nodeçƒ­æ›´æ–°-package-jsonä¸­ä¿®æ”¹" tabindex="-1">6.nodeçƒ­æ›´æ–°=&gt;(package.jsonä¸­ä¿®æ”¹) <a class="header-anchor" href="#_6-nodeçƒ­æ›´æ–°-package-jsonä¸­ä¿®æ”¹" aria-label="Permalink to &quot;6.nodeçƒ­æ›´æ–°=&gt;(package.jsonä¸­ä¿®æ”¹)&quot;">â€‹</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&quot;scripts&quot;: {</span></span>
<span class="line"><span>  &quot;start&quot;: &quot;nodemon ./bin/www&quot;</span></span>
<span class="line"><span>},</span></span></code></pre></div><h5 id="_7-app-jså¯æ”¹éƒ¨åˆ†" tabindex="-1">7.app.jså¯æ”¹éƒ¨åˆ† <a class="header-anchor" href="#_7-app-jså¯æ”¹éƒ¨åˆ†" aria-label="Permalink to &quot;7.app.jså¯æ”¹éƒ¨åˆ†&quot;">â€‹</a></h5><p>1.å¼•ç”¨è·¯ç”± å¯æ”¹</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>*var usersRouter = require(&#39;./routes/users&#39;);</span></span></code></pre></div><p>2.è·¯ç”±æ³¨å†Œ</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>app.use(&#39;/users&#39;, usersRouter);</span></span></code></pre></div><h6 id="" tabindex="-1"><a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">â€‹</a></h6><h2 id="å››-è¡¥å……æ³¨æ„ç‚¹" tabindex="-1">å››.è¡¥å……æ³¨æ„ç‚¹ <a class="header-anchor" href="#å››-è¡¥å……æ³¨æ„ç‚¹" aria-label="Permalink to &quot;å››.è¡¥å……æ³¨æ„ç‚¹&quot;">â€‹</a></h2><h5 id="_1-ä¸ºä»€ä¹ˆè¦æŠŠæ‰€æœ‰é™æ€èµ„æº-htmlæ–‡ä»¶-æˆ–è€…cssä¹‹ç±»-æŒ‡å®šæ”¾ç½®åˆ°ä¸å…¥å£æ–‡ä»¶index-jsåŒçº§çš„publicæ–‡ä»¶å¤¹ä¸‹" tabindex="-1">1.ä¸ºä»€ä¹ˆè¦æŠŠæ‰€æœ‰é™æ€èµ„æºï¼ˆhtmlæ–‡ä»¶ï¼Œæˆ–è€…cssä¹‹ç±»ï¼‰æŒ‡å®šæ”¾ç½®åˆ°ä¸å…¥å£æ–‡ä»¶index.jsåŒçº§çš„publicæ–‡ä»¶å¤¹ä¸‹? <a class="header-anchor" href="#_1-ä¸ºä»€ä¹ˆè¦æŠŠæ‰€æœ‰é™æ€èµ„æº-htmlæ–‡ä»¶-æˆ–è€…cssä¹‹ç±»-æŒ‡å®šæ”¾ç½®åˆ°ä¸å…¥å£æ–‡ä»¶index-jsåŒçº§çš„publicæ–‡ä»¶å¤¹ä¸‹" aria-label="Permalink to &quot;1.ä¸ºä»€ä¹ˆè¦æŠŠæ‰€æœ‰é™æ€èµ„æºï¼ˆhtmlæ–‡ä»¶ï¼Œæˆ–è€…cssä¹‹ç±»ï¼‰æŒ‡å®šæ”¾ç½®åˆ°ä¸å…¥å£æ–‡ä»¶index.jsåŒçº§çš„publicæ–‡ä»¶å¤¹ä¸‹?&quot;">â€‹</a></h5><ul><li><p>è¦æŠŠæ‰€æœ‰é™æ€èµ„æºï¼ˆhtmlæ–‡ä»¶ï¼Œæˆ–è€…cssä¹‹ç±»ï¼‰æŒ‡å®šæ”¾ç½®åˆ°ä¸å…¥å£æ–‡ä»¶index.jsåŒçº§çš„publicæ–‡ä»¶å¤¹ä¸‹</p><ul><li><pre><code>index.jsçš„app.use()å‡½æ•°ä¹ŸæŒ‡å®šäº†publicæ–‡ä»¶å¤¹ä½œä¸ºå­˜æ”¾é™æ€èµ„æºçš„è·¯å¾„ã€‚æ•…sendFile()å‡½æ•°è‡ªåŠ¨ä»publicæ–‡ä»¶å¤¹é‡Œå¯»æ‰¾html
</code></pre></li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>var express = require(&#39;express&#39;);</span></span>
<span class="line"><span>var app = express();</span></span>
<span class="line"><span>var path = require(&#39;path&#39;);</span></span>
<span class="line"><span>//åŠ è½½é™æ€èµ„æº</span></span>
<span class="line"><span>app.use(express.static(path.join(__dirname, &#39;public&#39;)));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>app.get(&#39;/&#39;, function(req, res) {</span></span>
<span class="line"><span>    res.sendFile(&#39;/index.html&#39;);</span></span>
<span class="line"><span>});</span></span>
<span class="line"><span>app.listen(8080);</span></span></code></pre></div><ul><li>index.jsåœ¨package.jsonä¸­è¢«æŒ‡å®šä¸ºå…¥å£æ–‡ä»¶ï¼ˆç›¸å½“äºCè¯­è¨€çš„ main.cppï¼‰=&gt;ä¸æ”¾åœ¨ä¸€ä¸ªåŒ…å®ç°æ–¹æ³•</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>var express = require(&#39;express&#39;);</span></span>
<span class="line"><span>var app = express();</span></span>
<span class="line"><span>var path = require(&#39;path&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>//app.use(express.static(path.join(__dirname, &#39;public&#39;)));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>app.get(&#39;/&#39;, function(req, res) {</span></span>
<span class="line"><span>    //res.send(&#39;hello!&#39;);</span></span>
<span class="line"><span>    res.sendFile(__dirname + &#39;/index.html&#39;);</span></span>
<span class="line"><span>});</span></span></code></pre></div></li></ul><p>â€‹</p><h6 id="_2-æ–°é¡¹ç›®å¸¸ç”¨ä¿®æ”¹" tabindex="-1">2.æ–°é¡¹ç›®å¸¸ç”¨ä¿®æ”¹ <a class="header-anchor" href="#_2-æ–°é¡¹ç›®å¸¸ç”¨ä¿®æ”¹" aria-label="Permalink to &quot;2.æ–°é¡¹ç›®å¸¸ç”¨ä¿®æ”¹&quot;">â€‹</a></h6><p>â€‹ äºŒ=&gt;5,6,7</p><h1 id="ğŸŒˆ-è¯·æ±‚reqå’Œå“åº”åŸç†resp-å‰åç«¯ä¼ è¾“ç®€å•ç¤ºä¾‹" tabindex="-1">ğŸŒˆ <strong>è¯·æ±‚reqå’Œå“åº”åŸç†respï¼ˆå‰åç«¯ä¼ è¾“ç®€å•ç¤ºä¾‹ï¼‰</strong> <a class="header-anchor" href="#ğŸŒˆ-è¯·æ±‚reqå’Œå“åº”åŸç†resp-å‰åç«¯ä¼ è¾“ç®€å•ç¤ºä¾‹" aria-label="Permalink to &quot;ğŸŒˆ **è¯·æ±‚reqå’Œå“åº”åŸç†respï¼ˆå‰åç«¯ä¼ è¾“ç®€å•ç¤ºä¾‹ï¼‰**&quot;">â€‹</a></h1><h2 id="ä¸€-ç®­å¤´å‡½æ•°å’ŒåŒ¿åå‡½æ•°åŒºåˆ«-ä½œç”¨æ—¶é—´åŒºåˆ«" tabindex="-1">ä¸€.ç®­å¤´å‡½æ•°å’ŒåŒ¿åå‡½æ•°åŒºåˆ«(ä½œç”¨æ—¶é—´åŒºåˆ«) <a class="header-anchor" href="#ä¸€-ç®­å¤´å‡½æ•°å’ŒåŒ¿åå‡½æ•°åŒºåˆ«-ä½œç”¨æ—¶é—´åŒºåˆ«" aria-label="Permalink to &quot;ä¸€.ç®­å¤´å‡½æ•°å’ŒåŒ¿åå‡½æ•°åŒºåˆ«(ä½œç”¨æ—¶é—´åŒºåˆ«)&quot;">â€‹</a></h2><h5 id="_1-æ­£å¸¸æƒ…å†µä¸‹thisæŒ‡å‘window" tabindex="-1">1.æ­£å¸¸æƒ…å†µä¸‹thisæŒ‡å‘window <a class="header-anchor" href="#_1-æ­£å¸¸æƒ…å†µä¸‹thisæŒ‡å‘window" aria-label="Permalink to &quot;1.æ­£å¸¸æƒ…å†µä¸‹thisæŒ‡å‘window&quot;">â€‹</a></h5><h5 id="_2-ç®­å¤´å‡½æ•°æ˜¯ç¼–è¯‘-è§£æ-æ—¶" tabindex="-1">2.ç®­å¤´å‡½æ•°æ˜¯ç¼–è¯‘(è§£æ)æ—¶=&gt; <a class="header-anchor" href="#_2-ç®­å¤´å‡½æ•°æ˜¯ç¼–è¯‘-è§£æ-æ—¶" aria-label="Permalink to &quot;2.ç®­å¤´å‡½æ•°æ˜¯ç¼–è¯‘(è§£æ)æ—¶=&gt;&quot;">â€‹</a></h5><ul><li><pre><code>ç¼–è¯‘æ—¶æŒ‡å‘å½“å‰thisæŒ‡å‘
</code></pre></li></ul><h5 id="_3-åŒ¿åå‡½æ•°æ˜¯è¿›è¡Œ-è¿è¡Œ-æ—¶" tabindex="-1">3.åŒ¿åå‡½æ•°æ˜¯è¿›è¡Œ(è¿è¡Œ)æ—¶=&gt; <a class="header-anchor" href="#_3-åŒ¿åå‡½æ•°æ˜¯è¿›è¡Œ-è¿è¡Œ-æ—¶" aria-label="Permalink to &quot;3.åŒ¿åå‡½æ•°æ˜¯è¿›è¡Œ(è¿è¡Œ)æ—¶=&gt;&quot;">â€‹</a></h5><ul><li>å…¨å±€ç¯å¢ƒæŒ‡å‘window function</li></ul><h2 id="äºŒ-æ•°æ®ä¼ è¾“ç®€å•åŸºç¡€åŸç†-æœåŠ¡ç«¯-æµè§ˆå™¨-post-get" tabindex="-1">äºŒ.æ•°æ®ä¼ è¾“ç®€å•åŸºç¡€åŸç†=&gt;(æœåŠ¡ç«¯,æµè§ˆå™¨,POST,GET) <a class="header-anchor" href="#äºŒ-æ•°æ®ä¼ è¾“ç®€å•åŸºç¡€åŸç†-æœåŠ¡ç«¯-æµè§ˆå™¨-post-get" aria-label="Permalink to &quot;äºŒ.æ•°æ®ä¼ è¾“ç®€å•åŸºç¡€åŸç†=&gt;(æœåŠ¡ç«¯,æµè§ˆå™¨,POST,GET)&quot;">â€‹</a></h2><h5 id="_1-æµè§ˆå™¨è®¿é—®åŸç†" tabindex="-1">1. æµè§ˆå™¨è®¿é—®åŸç†=&gt; <a class="header-anchor" href="#_1-æµè§ˆå™¨è®¿é—®åŸç†" aria-label="Permalink to &quot;1. æµè§ˆå™¨è®¿é—®åŸç†=&gt;&quot;">â€‹</a></h5><ul><li>åè®®=&gt;ip=&gt;ç«¯å£=&gt;uri</li></ul><h5 id="_2-æœåŠ¡ç«¯-å‰ç«¯-æ•°æ®ä¼ è¾“è¿‡ç¨‹" tabindex="-1">2. æœåŠ¡ç«¯(å‰ç«¯)æ•°æ®ä¼ è¾“è¿‡ç¨‹=&gt; <a class="header-anchor" href="#_2-æœåŠ¡ç«¯-å‰ç«¯-æ•°æ®ä¼ è¾“è¿‡ç¨‹" aria-label="Permalink to &quot;2. æœåŠ¡ç«¯(å‰ç«¯)æ•°æ®ä¼ è¾“è¿‡ç¨‹=&gt;&quot;">â€‹</a></h5><ul><li>æ§åˆ¶å±‚=&gt;é€»è¾‘å±‚=&gt;æ•°æ®å±‚=&gt;åç«¯(æ•°æ®æŒä¹…å±‚)</li></ul><h5 id="_3-getä¸poståŒºåˆ«" tabindex="-1">3. GETä¸POSTåŒºåˆ«:=&gt; <a class="header-anchor" href="#_3-getä¸poståŒºåˆ«" aria-label="Permalink to &quot;3. GETä¸POSTåŒºåˆ«:=&gt;&quot;">â€‹</a></h5><ul><li>GETæ˜¯è¿›è¡Œæ˜æ–‡ä¼ é€’,POSTéæ˜æ–‡è¯·æ±‚æ•°æ®æ”¾åœ¨è¯·æ±‚ä½“ä¸­</li></ul><h2 id="ä¸‰-çŠ¶æ€ç å¤§è‡´æ„ä¹‰" tabindex="-1">ä¸‰.çŠ¶æ€ç å¤§è‡´æ„ä¹‰ <a class="header-anchor" href="#ä¸‰-çŠ¶æ€ç å¤§è‡´æ„ä¹‰" aria-label="Permalink to &quot;ä¸‰.çŠ¶æ€ç å¤§è‡´æ„ä¹‰&quot;">â€‹</a></h2><ul><li>4xxå¼€å¤´æ˜¯å®¢æˆ·ç«¯,</li><li>5xxå¼€å¤´æœåŠ¡ç«¯é—®é¢˜,</li><li>200 ok,</li><li>3å¼€å¤´ nginxè¯·æ±‚è½¬å‘</li></ul><h2 id="å››-è¯·æ±‚å“åº”ä¸è·¨åŸŸ" tabindex="-1">å››.è¯·æ±‚å“åº”ä¸è·¨åŸŸ <a class="header-anchor" href="#å››-è¯·æ±‚å“åº”ä¸è·¨åŸŸ" aria-label="Permalink to &quot;å››.è¯·æ±‚å“åº”ä¸è·¨åŸŸ&quot;">â€‹</a></h2><h5 id="_1-req-request-è¯·æ±‚å¯¹è±¡" tabindex="-1">1.req:requestï¼ˆè¯·æ±‚å¯¹è±¡ï¼‰=&gt; <a class="header-anchor" href="#_1-req-request-è¯·æ±‚å¯¹è±¡" aria-label="Permalink to &quot;1.req:requestï¼ˆè¯·æ±‚å¯¹è±¡ï¼‰=&gt;&quot;">â€‹</a></h5><ul><li><pre><code>ä»£è¡¨,æ‰€æœ‰è·Ÿè¯·æ±‚æœ‰å…³çš„ä¸œè¥¿éƒ½åœ¨reqå¯¹è±¡é‡Œå¤´,åŒ…æ‹¬è¯·æ±‚å‚æ•° è¯·æ±‚å¤´ è¯·æ±‚å¤´ cookie
</code></pre></li></ul><h5 id="_2-res-response-å“åº”å¯¹è±¡" tabindex="-1">2.res:responseï¼ˆå“åº”å¯¹è±¡ï¼‰=&gt; <a class="header-anchor" href="#_2-res-response-å“åº”å¯¹è±¡" aria-label="Permalink to &quot;2.res:responseï¼ˆå“åº”å¯¹è±¡ï¼‰=&gt;&quot;">â€‹</a></h5><ul><li>æ‰€æœ‰å“åº”å®¢æˆ·ç«¯çš„ä¸œè¥¿éƒ½åœ¨resé‡Œå¤´,åŒ…æ‹¬ç›¸åº”å‚æ•°,å“åº”å¤´(è·¨åŸŸå¤„ç†å°±æ˜¯åœ¨è¿™)</li></ul><h5 id="_3-è·¨åŸŸè¯·æ±‚çš„æœ¬è´¨ä¸åŸç†" tabindex="-1">3.è·¨åŸŸè¯·æ±‚çš„æœ¬è´¨ä¸åŸç†=&gt; <a class="header-anchor" href="#_3-è·¨åŸŸè¯·æ±‚çš„æœ¬è´¨ä¸åŸç†" aria-label="Permalink to &quot;3.è·¨åŸŸè¯·æ±‚çš„æœ¬è´¨ä¸åŸç†=&gt;&quot;">â€‹</a></h5><ul><li><p>å½“ä¸€ä¸ªè¯·æ±‚urlçš„åè®®ã€åŸŸåã€ç«¯å£ä¸‰è€…ä¹‹é—´ä»»æ„ä¸€ä¸ªä¸å½“å‰é¡µé¢urlä¸åŒå³ä¸ºè·¨åŸŸ</p></li><li><p>è¯·æ±‚æœ¬è´¨æ˜¯æˆåŠŸçš„,ä½†æ˜¯æµè§ˆå™¨åˆ¤æ–­æœ¬æ¬¡è¯·æ±‚ä¸å®‰å…¨</p></li></ul><h2 id="äº”-resp-sendæ³¨æ„äº‹é¡¹" tabindex="-1">äº”.resp.sendæ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#äº”-resp-sendæ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;äº”.resp.sendæ³¨æ„äº‹é¡¹&quot;">â€‹</a></h2><ol><li><h5 id="æ¯ä¸ªå®Œæ•´çš„è¯·æ±‚-ä¸€å®šè¦ä»¥resp-sendæ¥ç»“æŸè¯·æ±‚-å¼ºè°ƒç»“æŸè¯·æ±‚-è€Œä¸æ˜¯ä»¥resp-sendç»“æŸä»£ç " tabindex="-1">æ¯ä¸ªå®Œæ•´çš„è¯·æ±‚,ä¸€å®šè¦ä»¥resp.sendæ¥ç»“æŸè¯·æ±‚,å¼ºè°ƒç»“æŸè¯·æ±‚,è€Œä¸æ˜¯ä»¥resp.sendç»“æŸä»£ç  <a class="header-anchor" href="#æ¯ä¸ªå®Œæ•´çš„è¯·æ±‚-ä¸€å®šè¦ä»¥resp-sendæ¥ç»“æŸè¯·æ±‚-å¼ºè°ƒç»“æŸè¯·æ±‚-è€Œä¸æ˜¯ä»¥resp-sendç»“æŸä»£ç " aria-label="Permalink to &quot;æ¯ä¸ªå®Œæ•´çš„è¯·æ±‚,ä¸€å®šè¦ä»¥resp.sendæ¥ç»“æŸè¯·æ±‚,å¼ºè°ƒç»“æŸè¯·æ±‚,è€Œä¸æ˜¯ä»¥resp.sendç»“æŸä»£ç &quot;">â€‹</a></h5></li><li><h5 id="å¦‚æœè¯·æ±‚ç»“æŸäº†-ä¹Ÿæƒ³è®©é€»è¾‘ä»£ç ç»“æŸ-é‚£ä¹ˆä¸€å®šè¦ä»¥returnç»“æŸ" tabindex="-1">å¦‚æœè¯·æ±‚ç»“æŸäº†,ä¹Ÿæƒ³è®©é€»è¾‘ä»£ç ç»“æŸ,é‚£ä¹ˆä¸€å®šè¦ä»¥returnç»“æŸ <a class="header-anchor" href="#å¦‚æœè¯·æ±‚ç»“æŸäº†-ä¹Ÿæƒ³è®©é€»è¾‘ä»£ç ç»“æŸ-é‚£ä¹ˆä¸€å®šè¦ä»¥returnç»“æŸ" aria-label="Permalink to &quot;å¦‚æœè¯·æ±‚ç»“æŸäº†,ä¹Ÿæƒ³è®©é€»è¾‘ä»£ç ç»“æŸ,é‚£ä¹ˆä¸€å®šè¦ä»¥returnç»“æŸ&quot;">â€‹</a></h5></li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>let start=(req,resp)=&gt;{</span></span>
<span class="line"><span>    resp.send(req.query)</span></span>
<span class="line"><span>    return;</span></span>
<span class="line"><span>    console.log(111);}</span></span></code></pre></div><h2 id="å…­-è¡¥å……æ³¨æ„ç‚¹" tabindex="-1">å…­.è¡¥å……æ³¨æ„ç‚¹ <a class="header-anchor" href="#å…­-è¡¥å……æ³¨æ„ç‚¹" aria-label="Permalink to &quot;å…­.è¡¥å……æ³¨æ„ç‚¹&quot;">â€‹</a></h2><h5 id="_1-jqå…¥å£å‡½æ•°æ„ä¹‰" tabindex="-1">1.JQå…¥å£å‡½æ•°æ„ä¹‰=&gt; <a class="header-anchor" href="#_1-jqå…¥å£å‡½æ•°æ„ä¹‰" aria-label="Permalink to &quot;1.JQå…¥å£å‡½æ•°æ„ä¹‰=&gt;&quot;">â€‹</a></h5><ul><li><p>å…¥å£å‡½æ•°,é€šå¸¸ä½¿ç”¨å’Œwindow.onloadä¸€æ ·çš„åŠŸæ•ˆ</p></li><li><p>åŒºåˆ«:åœ¨jqueryæ–‡ä»¶åŠ è½½å,åŒæ—¶å½“å‰çš„windowä¸‹é¢å·²ç»æœ‰äº†$å’Œjqå¯¹è±¡å,æ‰å¼€å§‹è¿è¡Œ</p></li></ul><hr><h1 id="ğŸŒˆ-cookieã€sessionã€å›¾ç‰‡éªŒè¯ç ã€jwtçš„ä½¿ç”¨" tabindex="-1">ğŸŒˆ Cookieã€sessionã€å›¾ç‰‡éªŒè¯ç ã€jwtçš„ä½¿ç”¨ <a class="header-anchor" href="#ğŸŒˆ-cookieã€sessionã€å›¾ç‰‡éªŒè¯ç ã€jwtçš„ä½¿ç”¨" aria-label="Permalink to &quot;ğŸŒˆ Cookieã€sessionã€å›¾ç‰‡éªŒè¯ç ã€jwtçš„ä½¿ç”¨&quot;">â€‹</a></h1><h2 id="ä¸€-response-cookieå’Œrequest-cookieçš„åŒºåˆ«" tabindex="-1">ä¸€.response.cookieå’Œrequest.cookieçš„åŒºåˆ« <a class="header-anchor" href="#ä¸€-response-cookieå’Œrequest-cookieçš„åŒºåˆ«" aria-label="Permalink to &quot;ä¸€.response.cookieå’Œrequest.cookieçš„åŒºåˆ«&quot;">â€‹</a></h2><h5 id="_1-èŒƒå›´ç‰¹ç‚¹ä½¿ç”¨è¯­æ³•å„ä¸ç›¸åŒ" tabindex="-1">1.èŒƒå›´ç‰¹ç‚¹ä½¿ç”¨è¯­æ³•å„ä¸ç›¸åŒ <a class="header-anchor" href="#_1-èŒƒå›´ç‰¹ç‚¹ä½¿ç”¨è¯­æ³•å„ä¸ç›¸åŒ" aria-label="Permalink to &quot;1.èŒƒå›´ç‰¹ç‚¹ä½¿ç”¨è¯­æ³•å„ä¸ç›¸åŒ&quot;">â€‹</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>response.cookieï¼š</span></span></code></pre></div><ol><li><p>æ“ä½œè¿‡çš„Cookieï¼Œæ‰€æœ‰æ–¹æ³•è·å–åˆ°çš„éƒ½æ˜¯è¢«æ›´æ–°è¿‡çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´Response.Cookiesæ˜¯ä¿®æ”¹æ‰€æœ‰å®¹å™¨ä¸­çš„Cookieçš„å€¼ã€‚</p></li><li><p>ç”¨äºåœ¨å®¢æˆ·ç«¯å†™å…¥cookieå€¼ã€‚è‹¥æŒ‡å®šçš„cookieä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒã€‚è‹¥å­˜åœ¨ï¼Œåˆ™å°†è‡ªåŠ¨è¿›è¡Œæ›´æ–°ã€‚ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯æµè§ˆå™¨ã€‚</p></li><li><p>Response.Cookies(CookieName)[(key)|.attribute]=valueã€‚è¿™é‡Œçš„CookiesNameæ˜¯æŒ‡å®šçš„Cookieçš„åç§°ï¼Œå¦‚æœæŒ‡å®šäº†Keyï¼Œåˆ™è¯¥Cookieå°±æ˜¯ä¸€ä¸ªå­—å…¸ï¼ŒAttributeå±æ€§åŒ…æ‹¬Domainï¼ŒExpiresï¼ŒHasKeysï¼ŒPathï¼ŒSecureã€‚</p></li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>request.cookieï¼š</span></span></code></pre></div><ol><li>åˆ›å»ºçš„Cookieåªèƒ½ç”¨äºåå°ä¸èƒ½ç”¨äºHTMLçš„å‰å°ã€‚</li><li>è®¾ç½®cookieçš„æœ€å¤§æœ‰æ•ˆæœŸä¸º30å¤©ï¼Œç„¶åé€šè¿‡Responseå›é€cookieåˆ°æµè§ˆå™¨ã€‚</li><li>Request.Cookiesä½¿ç”¨è¯­æ³•ï¼šRequest.Cookies(cookie)[(key)|.attribute]ã€‚</li></ol><h2 id="äºŒ-cookieä»£ç ç¤ºèŒƒ" tabindex="-1">äºŒ.Cookieä»£ç ç¤ºèŒƒ <a class="header-anchor" href="#äºŒ-cookieä»£ç ç¤ºèŒƒ" aria-label="Permalink to &quot;äºŒ.Cookieä»£ç ç¤ºèŒƒ&quot;">â€‹</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * è®¾ç½®cookie</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setCookie</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">seconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;è¿›å…¥setCookieé€»è¾‘å‡½æ•°&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    seconds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> seconds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//condsæœ‰å€¼å°±ç›´æ¥èµ‹å€¼ï¼Œæ²¡æœ‰ä¸º0ï¼Œè¿™ä¸ªæ ¹phpä¸ä¸€æ ·ã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> expires </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // cookieséšæµè§ˆå™¨å…³é—­è€Œå¤±æ•ˆçš„æ–¹æ³•:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //     å¦‚æœä¸è®¾ç½®Expiresçš„å±æ€§é‚£ä¹ˆCookieçš„å­˜æ´»æ—¶é—´å°±æ˜¯åœ¨å…³é—­æµè§ˆå™¨çš„æ—¶å€™ã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (seconds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ) {      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è®¾ç½®cookieç”Ÿå­˜æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seconds</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        expires </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;; expires=&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toGMTString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    document.cookie </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;=&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">escape</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">expires</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;; path=/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è½¬ç å¹¶èµ‹å€¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * è¯»å–cookie</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getCookie</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;è¿›å…¥getCookieé€»è¾‘å‡½æ•°&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nameEQ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;=&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ca </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.cookie.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŠŠcookieåˆ†å‰²æˆç»„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ca.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ca[i] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å–å¾—å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">charAt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39; &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆ¤æ–­ä¸€ä¸‹å­—ç¬¦ä¸²æœ‰æ²¡æœ‰å‰å¯¼ç©ºæ ¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">substring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, c.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æœ‰çš„è¯ï¼Œä»ç¬¬äºŒä½å¼€å§‹å–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nameEQ) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¦‚æœå«æœ‰æˆ‘ä»¬è¦çš„name</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> unescape</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">substring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nameEQ.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, c.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è§£ç å¹¶æˆªå–æˆ‘ä»¬è¦å€¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * æ£€æŸ¥cookie</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c_name</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {boolean}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkCookie</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    username </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getCookie</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c_name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(username);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (username </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> username </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * æ¸…é™¤cookie</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> clearCookie</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setCookie</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="ä¸‰-cookieç”Ÿå‘½å‘¨æœŸ" tabindex="-1">ä¸‰.Cookieç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#ä¸‰-cookieç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;ä¸‰.Cookieç”Ÿå‘½å‘¨æœŸ&quot;">â€‹</a></h2><p>å¦‚æœè¦ç«‹é©¬å¤±æ•ˆæ—¶é—´è¦è®¾ç½®ä¸º-1,è®¾ç½®ä¸º0ä¸ºæœ¬æ¬¡æµè§ˆå™¨å…³é—­ç»“æŸç”Ÿå‘½å‘¨æœŸ</p><p>å¦‚æœä¸è®¾ç½®Expiresçš„å±æ€§é‚£ä¹ˆCookieçš„å­˜æ´»æ—¶é—´å°±æ˜¯åœ¨å…³é—­æµè§ˆå™¨çš„æ—¶å€™ã€‚</p><h2 id="å››-sessionä½¿ç”¨" tabindex="-1">å››.sessionä½¿ç”¨ <a class="header-anchor" href="#å››-sessionä½¿ç”¨" aria-label="Permalink to &quot;å››.sessionä½¿ç”¨&quot;">â€‹</a></h2><h6 id="_1-sessionçš„æ¦‚å¿µ" tabindex="-1">1.sessionçš„æ¦‚å¿µ=&gt; <a class="header-anchor" href="#_1-sessionçš„æ¦‚å¿µ" aria-label="Permalink to &quot;1.sessionçš„æ¦‚å¿µ=&gt;&quot;">â€‹</a></h6><p>â€‹ ä¼šè¯ï¼ˆç”Ÿå‘½å‘¨æœŸï¼šé€šå¸¸æ˜¯æµè§ˆå™¨å…³äº†ï¼Œsessionå°±æ²¡äº†ï¼Œä¸åŒçš„æµè§ˆå™¨æœ‰ä¸åŒçš„sessionï¼Œæ°¸ä¹…ä¸å†²çªï¼‰</p><h6 id="_2-sessionçš„åº”ç”¨-ã€‹" tabindex="-1">2.sessionçš„åº”ç”¨--ã€‹ <a class="header-anchor" href="#_2-sessionçš„åº”ç”¨-ã€‹" aria-label="Permalink to &quot;2.sessionçš„åº”ç”¨--ã€‹&quot;">â€‹</a></h6><p>â€‹ ç”¨æ¥å­˜å‚¨ä¼šè¯çº§åˆ«çš„å˜é‡ï¼šä»¤ç‰Œçš„è§£å¯†ç§˜é’¥ç­‰ï¼Œå½“å‰ç™»å½•çš„ç”¨æˆ·çš„ä¿¡æ¯ï¼ˆå¯ä»¥ç»™æ•°æ®æ‹¾é‡Šå‹ï¼‰</p><h6 id="_3-sessionçš„ä½¿ç”¨-ã€‹åŒºåˆ«äºä¹‹å‰æˆ‘ä»¬ä½¿ç”¨cookieçš„ç”¨æ³•" tabindex="-1">3.sessionçš„ä½¿ç”¨--ã€‹åŒºåˆ«äºä¹‹å‰æˆ‘ä»¬ä½¿ç”¨cookieçš„ç”¨æ³•: <a class="header-anchor" href="#_3-sessionçš„ä½¿ç”¨-ã€‹åŒºåˆ«äºä¹‹å‰æˆ‘ä»¬ä½¿ç”¨cookieçš„ç”¨æ³•" aria-label="Permalink to &quot;3.sessionçš„ä½¿ç”¨--ã€‹åŒºåˆ«äºä¹‹å‰æˆ‘ä»¬ä½¿ç”¨cookieçš„ç”¨æ³•:&quot;">â€‹</a></h6><ol><li><h6 id="cookieçš„ç”¨æ³•-å‰åç«¯å…±äº«çš„å˜é‡åŒºåŸŸ" tabindex="-1">cookieçš„ç”¨æ³•ï¼šå‰åç«¯å…±äº«çš„å˜é‡åŒºåŸŸ <a class="header-anchor" href="#cookieçš„ç”¨æ³•-å‰åç«¯å…±äº«çš„å˜é‡åŒºåŸŸ" aria-label="Permalink to &quot;cookieçš„ç”¨æ³•ï¼šå‰åç«¯å…±äº«çš„å˜é‡åŒºåŸŸ&quot;">â€‹</a></h6><ol><li><p>è·å–cookie:ç”±è¯·æ±‚å¯¹è±¡æ¥å®ç° 2. æ“ä½œcookieï¼šåŒ…æ‹¬å¢åˆ æ”¹ ç”±å“åº”å¯¹è±¡æ¥å®ç°</p><pre><code>	2. ###### sessionçš„ç”¨æ³•ï¼šåªèƒ½æœåŠ¡ç«¯æ“ä½œï¼Œä»…ä»…æ˜¯å­˜åœ¨åœ¨æœåŠ¡ç«¯

		1.  è·å–ç”±è¯·æ±‚å¯¹è±¡æ¥è·å–
		2.  æ“ä½œç”±è¯·æ±‚å¯¹è±¡æ¥æ“ä½œ
</code></pre></li></ol></li></ol><p>â€‹</p><h6 id="_4-åŸç†è§£ç­”" tabindex="-1">4.åŸç†è§£ç­”=&gt; <a class="header-anchor" href="#_4-åŸç†è§£ç­”" aria-label="Permalink to &quot;4.åŸç†è§£ç­”=&gt;&quot;">â€‹</a></h6><p>å°±æ˜¯å½“è®¿é—®ä¸€ä¸ªé¡µé¢çš„æ—¶å€™ç»™æµè§ˆå™¨åˆ›å»ºä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å·ç ï¼Œä¹Ÿç»™åŒæ—¶åˆ›å»ºçš„sessionèµ‹äºˆåŒæ ·çš„å·ç ã€‚è¿™æ ·å°±å¯ä»¥åœ¨æ‰“å¼€åŒä¸€ä¸ªç½‘ç«™çš„ç¬¬äºŒä¸ªé¡µé¢æ—¶è·å–åˆ°ç¬¬ä¸€ä¸ªé¡µé¢ä¸­sessionä¿ç•™ä¸‹æ¥çš„å¯¹åº”ä¿¡æ¯ï¼ˆç†è§£ï¼šå½“è®¿é—®ç¬¬äºŒä¸ªé¡µé¢æ—¶å°†å·ç åŒæ—¶ä¼ é€’åˆ°ç¬¬äºŒä¸ªé¡µé¢ã€‚æ‰¾åˆ°å¯¹åº”çš„sessionã€‚ï¼‰ã€‚è¿™ä¸ªå·ç ä¹Ÿå«sessionIDï¼Œsessionçš„IDå·ç ï¼Œsessionçš„ç‹¬ä¸€æ— äºŒå·ç ã€‚</p><h6 id="_5-sessionå®‰è£…è¯­å¥" tabindex="-1">5.sessionå®‰è£…è¯­å¥ <a class="header-anchor" href="#_5-sessionå®‰è£…è¯­å¥" aria-label="Permalink to &quot;5.sessionå®‰è£…è¯­å¥&quot;">â€‹</a></h6><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> npm install express-session</span></span></code></pre></div><h6 id="_6-é…ç½®ä¸­é—´ä»¶-app-js" tabindex="-1">6.é…ç½®ä¸­é—´ä»¶=&gt;app.js <a class="header-anchor" href="#_6-é…ç½®ä¸­é—´ä»¶-app-js" aria-label="Permalink to &quot;6.é…ç½®ä¸­é—´ä»¶=&gt;app.js&quot;">â€‹</a></h6><p>æ³¨æ„ :è®¾ç½®åœ¨var app = express();ä¹‹å,è·¯ç”±ä¹‹å‰</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è®¾ç½®åœ¨var app = express();ä¹‹å</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å¼•å…¥session</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;express-session&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//é…ç½®ä¸­é—´ä»¶ maxAgeå•ä½ä¸ºms</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    secret: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;keyboard cat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    resave: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    saveUninitialized: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //maxAge:æœ€å¤šå¯ä»¥å­˜æ´»å¤šä¹…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cookie: (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;value&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,{maxAge:  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,secure: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}));</span></span></code></pre></div><h6 id="_7-express-sessionä½¿ç”¨" tabindex="-1">7.express-sessionä½¿ç”¨ <a class="header-anchor" href="#_7-express-sessionä½¿ç”¨" aria-label="Permalink to &quot;7.express-sessionä½¿ç”¨&quot;">â€‹</a></h6><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¾ç½®session</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">req.session.username</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¼ ä¸‰&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è·å–session</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">req.session.username</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//é‡æ–°è®¾ç½®cookieçš„è¿‡æœŸæ—¶é—´ä¸º1s</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">req.session.cookie.maxAge</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//é”€æ¯session</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">req.session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="äº”-å›¾ç‰‡éªŒè¯ç å®ç°" tabindex="-1">äº”.å›¾ç‰‡éªŒè¯ç å®ç° <a class="header-anchor" href="#äº”-å›¾ç‰‡éªŒè¯ç å®ç°" aria-label="Permalink to &quot;äº”.å›¾ç‰‡éªŒè¯ç å®ç°&quot;">â€‹</a></h2><h6 id="_1-svgå®‰è£…" tabindex="-1">1.svgå®‰è£… <a class="header-anchor" href="#_1-svgå®‰è£…" aria-label="Permalink to &quot;1.svgå®‰è£…&quot;">â€‹</a></h6><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install svg-captcha</span></span></code></pre></div><h6 id="_2-å›¾ç‰‡éªŒè¯ç ä»£ç " tabindex="-1">2.å›¾ç‰‡éªŒè¯ç ä»£ç  <a class="header-anchor" href="#_2-å›¾ç‰‡éªŒè¯ç ä»£ç " aria-label="Permalink to &quot;2.å›¾ç‰‡éªŒè¯ç ä»£ç &quot;">â€‹</a></h6><p>â‘ å‰ç«¯é¡µé¢ä»£ç </p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">fieldset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">legend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;éªŒè¯ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">legend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:3000/users/getCaptcha&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> alt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;capText&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;button&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onclick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">captachaValid</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;éªŒè¯&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">fieldset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>â‘¡è¿è¡Œå‡½æ•°</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> captachaValid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    future.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ajax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        url:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/users/captachaValid&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        type:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;get&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        data:{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            captcha:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#capText&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;éªŒè¯æˆåŠŸ&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>â‘¢è·¯ç”±æ–‡ä»¶ä¸­(routes/users)</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> svgCaptcha </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;svg-captcha&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/getCaptcha&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> captcha </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> svgCaptcha.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç¿»è½¬é¢œè‰²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    inverse: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å­—ä½“å¤§å°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fontSize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">36</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å™ªå£°çº¿æ¡æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    noise: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å®½åº¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    width: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // é«˜åº¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    height: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ä¿å­˜åˆ°session,å¿½ç•¥å¤§å°å†™</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  req.session.captcha </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> captcha.text.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toLowerCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req.session.captcha); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//0xtg ç”Ÿæˆçš„éªŒè¯ç </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //è®¾ç½®ä»€ä¹ˆæ ¼å¼è¿”å›å‰ç«¯,é»˜è®¤textæ ¼å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Content-Type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;image/svg+xml&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //å°†æ­¤æ•°æ®è½¬æˆå­—ç¬¦ä¸²å†™å…¥ä¼ åˆ°å‰ç«¯,å¹¶ä¸”.writeå¹¶ä¸ä¼šç»“æŸè¯·æ±‚å¯ä»¥å¤šæ¬¡è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(captcha.data));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h6 id="_3-éªŒè¯ç ä½¿ç”¨å®æ“" tabindex="-1">3.éªŒè¯ç ä½¿ç”¨å®æ“ <a class="header-anchor" href="#_3-éªŒè¯ç ä½¿ç”¨å®æ“" aria-label="Permalink to &quot;3.éªŒè¯ç ä½¿ç”¨å®æ“&quot;">â€‹</a></h6><ol><li><p>å®‰è£…npm install svg-captcha</p></li><li><p>ç›´æ¥ä½¿ç”¨captchaçš„api</p></li><li><p>ç›´æ¥æ ¹æ®captchaç”Ÿæˆçš„å¯¹è±¡åšè§£æ</p></li><li><p>å¹…åº¦æ®µè¿”å›éªŒè¯ç ä¹‹å‰éœ€è¦ç¼“å­˜éªŒè¯ç çš„å†…å®¹(å…±åç»­éªŒè¯ç”¨)</p></li><li><p>å®ŒæˆéªŒè¯ç çš„ç‚¹å‡»åˆ·æ–°åŠŸèƒ½</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://192.168.0.151:3000/users/getCaptcha&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onclick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">javascript</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAttribute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(&#39;src&#39;,&#39;http</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//192.168.0.151:3000/users/getCaptcha?v=&#39;+new Date().getTime())</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æ ¹æ®tokenä¸åŒç”Ÿæˆä¸åŒéªŒè¯ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://localhost:3000/users/getCaptcha?v=&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&amp;token=&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.localStorage.token)</span></span></code></pre></div></li></ol><h2 id="å…­-æ‹¦æˆªå™¨-jwt" tabindex="-1">å…­.æ‹¦æˆªå™¨=&gt;jwt <a class="header-anchor" href="#å…­-æ‹¦æˆªå™¨-jwt" aria-label="Permalink to &quot;å…­.æ‹¦æˆªå™¨=&gt;jwt&quot;">â€‹</a></h2><h5 id="_1-jwtå®‰è£…" tabindex="-1">1.jwtå®‰è£… <a class="header-anchor" href="#_1-jwtå®‰è£…" aria-label="Permalink to &quot;1.jwtå®‰è£…&quot;">â€‹</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install jsonwebtoken</span></span></code></pre></div><h5 id="_2-jwtçš„ç›¸å…³api" tabindex="-1">2.jwtçš„ç›¸å…³api=&gt; <a class="header-anchor" href="#_2-jwtçš„ç›¸å…³api" aria-label="Permalink to &quot;2.jwtçš„ç›¸å…³api=&gt;&quot;">â€‹</a></h5><h6 id="a-jwtutils" tabindex="-1">a.jwtUtils <a class="header-anchor" href="#a-jwtutils" aria-label="Permalink to &quot;a.jwtUtils&quot;">â€‹</a></h6><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®‰å…¨æ‹¦æˆªå™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> jwt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jsonwebtoken&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * éªŒè¯æƒé™</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> token</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> secretkey</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ç§˜é’¥</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> success</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> verify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">secretkey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    jwt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">verify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token, secretkey, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">decode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (success) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(decode);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * ç­¾å</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> load</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è½½è· jsonå¯¹è±¡ å­˜å‚¨å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> secretkey</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ç§˜é’¥</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> expiresIn</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è¿‡æœŸæ—¶é—´ ç§’</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {number | PromiseLike&lt;ArrayBuffer&gt;}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">secretkey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">expiresIn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jwt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(load, secretkey, {expiresIn: expiresIn});</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> token;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**å¼‚æ­¥è½¬åŒæ­¥</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * è¿™ä¸ªå†app.jsè·¯ç”±è°ƒç”¨ä¸­å·²ç»è½¬æ¢è¿‡ä¸€æ¬¡,æ‰€ä»¥ä¸ç”¨é‡å¤è½¬æ¢</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> token</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> secretkey</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {Promise&lt;any&gt;}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> verifysync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">secretkey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        jwt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">verify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token, secretkey, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">decode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err.message);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                    resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({err: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, msg: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç»˜ç”»å·²è¿‡æœŸ&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                    resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(decode)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {verify, sign, verifysync};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*//ä½¿ç”¨è§£å¯†</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">let user={id:111,name:&#39;user&#39;,password:123456};</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/!*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//qæ¸…ç©ºå¯†ç </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">delete user.password;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">let token=sign(user,&#39;123456&#39;,10);*!/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è§£å¯†</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">let token=sign(user,&#39;123456&#39;,10);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">verify(token,&quot;123456&quot;,function (user) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    console.log(user);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">},function (err) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    console.error(err)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">console.log(token);*/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*verify(token,&#39;123456&#39;,function (user) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    console.log(user)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">},function (err) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    console.error(err);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">})*/</span></span></code></pre></div><h6 id="b-æ‹¦æˆªå™¨ä¸­é—´ä»¶" tabindex="-1">b.æ‹¦æˆªå™¨ä¸­é—´ä»¶=&gt; <a class="header-anchor" href="#b-æ‹¦æˆªå™¨ä¸­é—´ä»¶" aria-label="Permalink to &quot;b.æ‹¦æˆªå™¨ä¸­é—´ä»¶=&gt;&quot;">â€‹</a></h6><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æ‹¦æˆªå™¨ä¸­é—´ä»¶,åŸæœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    log.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req.path);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req.path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/mine.html&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/user/login&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/user/register&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.headers.token;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        safeInterceptor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">verify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token,global.secretKey,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            req.headers.sessionData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * å…¨ç³»ç»Ÿå…è®¸è·¨åŸŸå¤„ç† è¿™æ®µé…ç½®è¦å†newå‡ºexpresså®ä¾‹çš„æ—¶å€™å°±è¦è®¾ç½®äº†ï¼Œæ”¾åœ¨æ‰€æœ‰çš„apiå‰é¢ï¼Œä¸ç„¶æ²¡æœ‰æ•ˆæœ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //è®¾ç½®å…è®¸è·¨åŸŸçš„åŸŸåï¼Œ*ä»£è¡¨å…è®¸ä»»æ„åŸŸåè·¨åŸŸ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Access-Control-Allow-Origin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å…è®¸çš„headerç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Access-Control-Allow-Headers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //è·¨åŸŸå…è®¸çš„è¯·æ±‚æ–¹å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Access-Control-Allow-Methods&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (req.method.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toLowerCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;options&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è®©optionså°è¯•è¯·æ±‚å¿«é€Ÿç»“æŸ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * æ‹¦æˆªå™¨ä¸­é—´ä»¶,ç™»é™†æ³¨å†ŒåŠŸèƒ½æ—¶ä¿®æ”¹ä½¿ç”¨çš„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">req.path;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //æ£€æŸ¥è·¯ç”± å†³å®šæ˜¯å¦æ‹¦æˆª,``````````~~~~~~~~!!!!!çŠ¯çš„é”™è¯¯:å°†é™¤äº†ç™»é™†å¤–çš„å…¨éƒ¨æ‹¦æˆªäº†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/users/login&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç™»å…¥é¡µé¢æ”¾è¡Œ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //ä»è¯·æ±‚å¤´é‡Œé¢æ‹¿åˆ°ä»¤ç‰Œ==&gt;å¸¸è§„æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">req.headers.token;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">token){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //éå¸¸è§„çŠ¶å†µ(æ–‡ä»¶ä¸‹è½½,æ˜¯å¦æ²¡åŠæ³•è®¾ç½®è¯·æ±‚å¤´,æˆ–è€…ä¾‹å¦‚è·å–éªŒè¯ç ç­‰)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">req.query.token;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jwtUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">verifysync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token,global.globalKey)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (result.err) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // resp.status(500)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            resp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result.msg)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // throw  new Error(result.msg)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            req.headers.session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //è¡¨ç¤ºæ‰§è¡Œä¸‹ä¸€æ­¥åŠ¨ä½œ--&gt;æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆå…¬äº†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><h5 id="_3-å‰åç«¯åˆ†ç¦»çš„åœºæ™¯" tabindex="-1">3.å‰åç«¯åˆ†ç¦»çš„åœºæ™¯=&gt; <a class="header-anchor" href="#_3-å‰åç«¯åˆ†ç¦»çš„åœºæ™¯" aria-label="Permalink to &quot;3.å‰åç«¯åˆ†ç¦»çš„åœºæ™¯=&gt;&quot;">â€‹</a></h5><p>å½“å‰ç”¨æˆ·çš„èº«ä»½å¦‚æœä»¥æ˜æ–‡ä¼ è¾“,å¾ˆå®¹æ˜“æ•…æ„è¢«æ¨¡ä»¿,æ‰€ä»¥ éœ€è¦å¯¹ç”¨æˆ·çš„èº«ä»½è¿›è¡ŒåŠ å¯†ä¼ è¾“ åŠ å¯†ä¼ è¾“çš„æ–¹å¼: 1)https 2)rsa éå¯¹ç§°åŠ å¯† 3)aes å¯¹ç§°å¯†é’¥ 4)jwt json web token: ç›®å‰æ¯”è¾ƒæµè¡Œçš„</p><h5 id="_4-jwtçš„ä½œç”¨" tabindex="-1">4.jwtçš„ä½œç”¨=&gt; <a class="header-anchor" href="#_4-jwtçš„ä½œç”¨" aria-label="Permalink to &quot;4.jwtçš„ä½œç”¨=&gt;&quot;">â€‹</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ç”¨æ¥åŠ å¯†é—¨ç¥¨ç”¨çš„.</span></span>
<span class="line"><span>åŠ å¯†:1)è¢«åŠ å¯† 2)ç”¨ä»€ä¹ˆåŠ å¯†(åŠ ç›)</span></span>
<span class="line"><span>ç®€å•ç‰ˆçš„:å¯†é’¥å…±ç”¨,ä½†æ˜¯è¢«åŠ å¯†çš„ä¸œè¥¿ä¸ä¸€æ ·</span></span></code></pre></div><h5 id="_5-å®é™…æ“ä½œ" tabindex="-1">5.å®é™…æ“ä½œ=&gt; <a class="header-anchor" href="#_5-å®é™…æ“ä½œ" aria-label="Permalink to &quot;5.å®é™…æ“ä½œ=&gt;&quot;">â€‹</a></h5><ol><li>åœ¨ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åä½¿ç”¨jwtå¯¹ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯è¿›è¡ŒåŠ å¯†(æ³¨æ„è¦æå‡ºå¯†ç å±æ€§)</li><li>åŠ å¯†ä¹‹å,å°†tokenè¿”å›åˆ°å‰ç«¯,å­˜å‚¨åˆ°localStorage</li><li>æ¯æ¬¡è¯·æ±‚,åœ¨è¯·æ±‚å‘é€ä¹‹å‰,å°†localStorageé‡Œå¤´çš„ä»¤ç‰Œ,å½“ä½œè¯·æ±‚å¤´ä¸€èµ·å‘é€</li><li>æœåŠ¡ç«¯é’ˆå¯¹éœ€è¦éªŒæƒ(é‰´æƒ)çš„apiè¿›è¡Œå®šåˆ¶åŒ–æ‹¦æˆª(å‰ç½®æ‹¦æˆªå™¨)</li><li>å°†æ‹¦æˆªä¸‹æ¥çš„reqé‡Œå¤´çš„ä»¤ç‰Œå–å‡ºæ¥,å¹¶åšè§£å¯†é”™åš <ol><li><pre><code> è§£å¯†æˆåŠŸ:å°†è§£å¯†å‡ºæ¥çš„å¯¹è±¡,å³ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯å¯¹è±¡,å¹¶å°†è¯¥åŸºæœ¬ä¿¡æ¯å¯¹è±¡å­˜åˆ°è¯·æ±‚å¤´é‡Œå»(å•çº¿ç¨‹å˜é‡-ç”¨æ—¶é—´æ¢ç©ºé—´)
</code></pre></li><li><pre><code> è§£å¯†å¤±è´¥:è¯·æ±‚ç»“æŸå¹¶æŠ¥é”™(ä¼šè¯å·²ç»è¿‡æœŸ,è¯·é‡æ–°ç™»å½•,å‰ç«¯çš„è¡¨ç°é€šå¸¸æ—¶ç›´æ¥é‡å®šå‘åˆ°ç™»å½•é¡µé¢)
</code></pre></li></ol></li><li>æ‰§è¡Œä¸šåŠ¡ä»£ç ,å¦‚æœæ‰§è¡Œçš„è¿‡ç¨‹éœ€è¦ç”¨åˆ°ç”¨æˆ·ä¿¡æ¯,é‚£ä¹ˆä¸è¦å†ä»æ•°æ®åº“é‡Œå¤´å»æŸ¥è¯¢æ•°æ®,ç›´æ¥ä»è¯·æ±‚æå°±è¡Œäº†</li></ol><h1 id="ğŸŒˆ-é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ³•" tabindex="-1">ğŸŒˆ é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ³• <a class="header-anchor" href="#ğŸŒˆ-é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ³•" aria-label="Permalink to &quot;ğŸŒˆ é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ³•&quot;">â€‹</a></h1><h5 id="_1-ä¸ºä½•åœ¨å­—ç¬¦ä¸²ä¸­è½¬ä¹‰ä¸å‡ºå˜é‡" tabindex="-1">1.ä¸ºä½•åœ¨å­—ç¬¦ä¸²ä¸­è½¬ä¹‰ä¸å‡ºå˜é‡ <a class="header-anchor" href="#_1-ä¸ºä½•åœ¨å­—ç¬¦ä¸²ä¸­è½¬ä¹‰ä¸å‡ºå˜é‡" aria-label="Permalink to &quot;1.ä¸ºä½•åœ¨å­—ç¬¦ä¸²ä¸­è½¬ä¹‰ä¸å‡ºå˜é‡&quot;">â€‹</a></h5><p>â€‹ é—®é¢˜ä»£ç ä½ç½®=&gt;console.log(&#39;ä¼šè¯ID:${req.sessionID}&#39;);=&gt;test/users.js=&gt;26</p><p>â€‹ é—®é¢˜åˆ†æ=&gt;ç”¨é”™ç¬¦å·,åº”ç”¨æ¨¡æ¿ç¬¦å·</p><p>â€‹ é—®é¢˜è§£å†³=&gt;ä½¿ç”¨``è€Œä¸èƒ½ç”¨&#39;&#39;</p><h5 id="_2-ä¸ºä»€ä¹ˆåœ¨åå°ä»£ç test-usersä¸­è°ƒç”¨ä¸äº†publicä¸­çš„è‡ªå®šä¹‰-cookieuti-js-jsåŒ…ä¸­çš„å‡½æ•°" tabindex="-1">2.ä¸ºä»€ä¹ˆåœ¨åå°ä»£ç test/usersä¸­è°ƒç”¨ä¸äº†publicä¸­çš„è‡ªå®šä¹‰(CookieUti.js)jsåŒ…ä¸­çš„å‡½æ•°? <a class="header-anchor" href="#_2-ä¸ºä»€ä¹ˆåœ¨åå°ä»£ç test-usersä¸­è°ƒç”¨ä¸äº†publicä¸­çš„è‡ªå®šä¹‰-cookieuti-js-jsåŒ…ä¸­çš„å‡½æ•°" aria-label="Permalink to &quot;2.ä¸ºä»€ä¹ˆåœ¨åå°ä»£ç test/usersä¸­è°ƒç”¨ä¸äº†publicä¸­çš„è‡ªå®šä¹‰(CookieUti.js)jsåŒ…ä¸­çš„å‡½æ•°?&quot;">â€‹</a></h5><p>â€‹ é—®é¢˜ä»£ç ä½ç½®=&gt;test/users.js=&gt;35</p><p>â€‹ é—®é¢˜åˆ†æ=&gt;åœ¨åå°ä»£ç test/usersä¸­è°ƒç”¨é™æ€èµ„æºä¸­çš„æ–‡ä»¶,å¯¼è‡´è°ƒç”¨é”™è¯¯</p><p>â€‹ åŸç†å‰–æ=&gt;æœ¬è´¨ä¸Šnodeæ˜¯åå°ä»£ç ,å…¶ä¸­åŒ…æ‹¬bin/www , routes/users.js||index.js ,node_modules ,app.js ,</p><p>â€‹ package.jsonéƒ½æ˜¯åå°æ–‡ä»¶, è€Œpublicå…¶å®æ˜¯å•ç‹¬çš„é™æ€æ–‡ä»¶,å®ƒä¸åå°æ–‡ä»¶æ˜¯é€šè¿‡å…±äº«portç«¯å£è¿›è¡Œæ•° æ®ä¼ è¾“,è€Œä¸èƒ½ç›¸äº’è°ƒç”¨</p><p>â€‹</p><hr><hr><h1 id="ğŸŒˆ-çŸ¥è¯†ç‚¹çš„å¤ä¹ ä¸è¡¥å……" tabindex="-1">ğŸŒˆ çŸ¥è¯†ç‚¹çš„å¤ä¹ ä¸è¡¥å…… <a class="header-anchor" href="#ğŸŒˆ-çŸ¥è¯†ç‚¹çš„å¤ä¹ ä¸è¡¥å……" aria-label="Permalink to &quot;ğŸŒˆ çŸ¥è¯†ç‚¹çš„å¤ä¹ ä¸è¡¥å……&quot;">â€‹</a></h1><h2 id="ä¸€-å¯¹äºä¸€ä¸ªæ–°é¡¹ç›®å®æ“å‡†å¤‡å·¥ä½œ" tabindex="-1">ä¸€.å¯¹äºä¸€ä¸ªæ–°é¡¹ç›®å®æ“å‡†å¤‡å·¥ä½œ <a class="header-anchor" href="#ä¸€-å¯¹äºä¸€ä¸ªæ–°é¡¹ç›®å®æ“å‡†å¤‡å·¥ä½œ" aria-label="Permalink to &quot;ä¸€.å¯¹äºä¸€ä¸ªæ–°é¡¹ç›®å®æ“å‡†å¤‡å·¥ä½œ&quot;">â€‹</a></h2><h6 id="_1ã€é‡æ–°é…ç½®app-js" tabindex="-1">1ã€é‡æ–°é…ç½®app.js <a class="header-anchor" href="#_1ã€é‡æ–°é…ç½®app-js" aria-label="Permalink to &quot;1ã€é‡æ–°é…ç½®app.js&quot;">â€‹</a></h6><ol><li><p>é…ç½®å…¨å±€å¼‚å¸¸å¤„ç†æ‹¦æˆªå™¨ï¼ˆåç½®æ‹¦æˆªå™¨ï¼‰</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> res.status(err.status || 500);</span></span>
<span class="line"><span>/*</span></span>
<span class="line"><span>*  â‘ é…ç½®å…¨å±€å¼‚å¸¸å¤„ç†æ‹¦æˆªå™¨(åç½®æ‹¦æˆªå™¨)</span></span>
<span class="line"><span>* */</span></span>
<span class="line"><span> res.render(err.message);</span></span></code></pre></div></li><li><p>é…ç½®å…¨å±€è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆå‰ç½®æ‹¦æˆªå™¨ï¼‰--åé¢ä¸€èµ·è®²ï¼ˆjwtï¼‰</p></li></ol><h6 id="_2ã€åŸºäºpublicæ„å»ºåŒåŸŸå‰ç«¯" tabindex="-1">2ã€åŸºäºpublicæ„å»ºåŒåŸŸå‰ç«¯ <a class="header-anchor" href="#_2ã€åŸºäºpublicæ„å»ºåŒåŸŸå‰ç«¯" aria-label="Permalink to &quot;2ã€åŸºäºpublicæ„å»ºåŒåŸŸå‰ç«¯&quot;">â€‹</a></h6><ol><li>publicä½œä¸ºé™æ€çš„ç›®å½•æ–‡ä»¶å¤¹æ˜¯å¯ä»¥é…ç½®çš„</li><li>é™æ€ç›®å½•é‡Œå¤´çš„æ–‡ä»¶å’ŒæœåŠ¡ç«¯çš„æ–‡ä»¶æ˜¯è¦åŒºåˆ†å¼€æ¥çš„ï¼Œä¸å…·å¤‡ç›¸äº’å¼•ç”¨çš„èƒ½åŠ› <ol><li>é™æ€ç›®å½•é‡Œå¤´çš„æ–‡ä»¶æœ€ç»ˆéƒ½æ˜¯åœ¨å®¢æˆ·ç«¯è¢«è®¿é—®</li><li>æœåŠ¡ç«¯é‡Œå¤´çš„æ–‡ä»¶åªæä¾›æœåŠ¡ï¼Œä¸æä¾›æ–‡ä»¶çš„è®¿é—®</li><li>é™æ€æ–‡ä»¶å’ŒæœåŠ¡ç«¯çš„æ–‡ä»¶ä¹‹é—´çš„äº¤äº’è¦é€šè¿‡httpè¯·æ±‚æ¥å®ç°ï¼ˆajax fetch axiosï¼‰</li></ol></li></ol><h6 id="_3-ä½¿ç”¨session" tabindex="-1">3. ä½¿ç”¨session <a class="header-anchor" href="#_3-ä½¿ç”¨session" aria-label="Permalink to &quot;3. ä½¿ç”¨session&quot;">â€‹</a></h6><p>â€‹ ä½¿ç”¨express-sessionæ¥æ“ä½œæœåŠ¡ç«¯çš„session</p><p>â€‹ å®‰è£…ï¼šnpm install express-session</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/*å¼•ç”¨session</span></span>
<span class="line"><span>* */</span></span>
<span class="line"><span>let session=require(&#39;express-session&#39;)</span></span>
<span class="line"><span>/*</span></span>
<span class="line"><span>*sessioné…ç½®</span></span>
<span class="line"><span>* */</span></span>
<span class="line"><span>app.use(session({</span></span>
<span class="line"><span>    secret:&quot;keyboard cat&quot;</span></span>
<span class="line"><span>}))</span></span></code></pre></div><h6 id="_4-éªŒè¯ç " tabindex="-1">4. éªŒè¯ç  <a class="header-anchor" href="#_4-éªŒè¯ç " aria-label="Permalink to &quot;4. éªŒè¯ç &quot;">â€‹</a></h6><ol><li><p>â‘  å®‰è£…</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install svg-captcha</span></span></code></pre></div></li><li><p>ç›´æ¥ä½¿ç”¨captchaçš„api</p></li><li><p>ç›´æ¥æ ¹æ®captchaç”Ÿæˆçš„å¯¹è±¡åšè§£æ</p></li><li><p>å¹…åº¦æ®µè¿”å›éªŒè¯ç ä¹‹å‰éœ€è¦ç¼“å­˜éªŒè¯ç çš„å†…å®¹(å…±åç»­éªŒè¯ç”¨)</p></li><li><p>å®ŒæˆéªŒè¯ç çš„ç‚¹å‡»åˆ·æ–°åŠŸèƒ½</p></li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>//  &lt;img src=&quot;http://192.168.0.151:3000/users/getCaptcha&quot; onclick=&quot;javascript:this.setAttribute(&#39;src&#39;,&#39;http://192.168.0.151:3000/users/getCaptcha?v=&#39;+new Date().getTime())&quot;&gt;</span></span></code></pre></div><h2 id="äºŒ-é‡è¦å‡†åˆ™" tabindex="-1">äºŒ.é‡è¦å‡†åˆ™ <a class="header-anchor" href="#äºŒ-é‡è¦å‡†åˆ™" aria-label="Permalink to &quot;äºŒ.é‡è¦å‡†åˆ™&quot;">â€‹</a></h2><h6 id="_1-å¾ˆé‡è¦çš„å‡†åˆ™" tabindex="-1">1.å¾ˆé‡è¦çš„å‡†åˆ™ï¼š <a class="header-anchor" href="#_1-å¾ˆé‡è¦çš„å‡†åˆ™" aria-label="Permalink to &quot;1.å¾ˆé‡è¦çš„å‡†åˆ™ï¼š&quot;">â€‹</a></h6><ol><li>æŒ‡ä»¤å¯ä»¥ä¹Ÿåº”è¯¥è¦å…¨å±€å®‰è£…</li><li>ä¾èµ–é€šå¸¸æ˜¯è£…åœ¨å±€éƒ¨ï¼Œï¼ˆæ²¡åŠæ³•ç¡®ä¿é¡¹ç›®å’Œå…¨å±€çš„ç›®å½•æ˜¯ä¸€ä¸ªä¾„å­å’Œå”å”çš„å…³ç³»ï¼‰</li></ol><h6 id="_2-requireå¼•ç”¨åŒ…çš„ä¸€ä¸ªæ¬¡åºã€‚" tabindex="-1">2.requireå¼•ç”¨åŒ…çš„ä¸€ä¸ªæ¬¡åºã€‚ <a class="header-anchor" href="#_2-requireå¼•ç”¨åŒ…çš„ä¸€ä¸ªæ¬¡åºã€‚" aria-label="Permalink to &quot;2.requireå¼•ç”¨åŒ…çš„ä¸€ä¸ªæ¬¡åºã€‚&quot;">â€‹</a></h6><ol><li>ä¸»è¦ç†è§£ çœç•¥åç¼€åçš„åœºæ™¯å’Œ node_modulesæ‰¾åŒ…çš„ä¸€ä¸ªæ¬¡åºï¼ˆä»é‡Œå¾€å¤–ï¼‰</li></ol><p>â€‹</p><p>â€‹</p><hr><h1 id="ğŸŒˆ-promise-await-asyncæ¦‚å¿µåŠç®€å•åº”ç”¨" tabindex="-1">ğŸŒˆ Promise+await+asyncæ¦‚å¿µåŠç®€å•åº”ç”¨ <a class="header-anchor" href="#ğŸŒˆ-promise-await-asyncæ¦‚å¿µåŠç®€å•åº”ç”¨" aria-label="Permalink to &quot;ğŸŒˆ Promise+await+asyncæ¦‚å¿µåŠç®€å•åº”ç”¨&quot;">â€‹</a></h1><h2 id="ä¸€-promise" tabindex="-1">ä¸€.Promise <a class="header-anchor" href="#ä¸€-promise" aria-label="Permalink to &quot;ä¸€.Promise&quot;">â€‹</a></h2><h5 id="_1-promiseä½œç”¨" tabindex="-1">1.Promiseä½œç”¨: <a class="header-anchor" href="#_1-promiseä½œç”¨" aria-label="Permalink to &quot;1.Promiseä½œç”¨:&quot;">â€‹</a></h5><blockquote><h6 id="ç”¨æ¥è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜-ä½†æ˜¯åªæ˜¯ç®€å•çš„æ”¹å˜æ ¼å¼-å¹¶æ²¡æœ‰å½»åº•è§£å†³ä¸Šé¢çš„é—®é¢˜çœŸæ­£è¦è§£å†³ä¸Šè¿°é—®é¢˜-ä¸€å®šè¦åˆ©ç”¨promiseå†åŠ ä¸Šawaitå’Œasyncå…³é”®å­—å®ç°å¼‚æ­¥ä¼ åŒæ­¥" tabindex="-1">ç”¨æ¥è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜ï¼Œä½†æ˜¯åªæ˜¯ç®€å•çš„æ”¹å˜æ ¼å¼ï¼Œå¹¶æ²¡æœ‰å½»åº•è§£å†³ä¸Šé¢çš„é—®é¢˜çœŸæ­£è¦è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œä¸€å®šè¦åˆ©ç”¨promiseå†åŠ ä¸Šawaitå’Œasyncå…³é”®å­—å®ç°å¼‚æ­¥ä¼ åŒæ­¥ <a class="header-anchor" href="#ç”¨æ¥è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜-ä½†æ˜¯åªæ˜¯ç®€å•çš„æ”¹å˜æ ¼å¼-å¹¶æ²¡æœ‰å½»åº•è§£å†³ä¸Šé¢çš„é—®é¢˜çœŸæ­£è¦è§£å†³ä¸Šè¿°é—®é¢˜-ä¸€å®šè¦åˆ©ç”¨promiseå†åŠ ä¸Šawaitå’Œasyncå…³é”®å­—å®ç°å¼‚æ­¥ä¼ åŒæ­¥" aria-label="Permalink to &quot;ç”¨æ¥è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜ï¼Œä½†æ˜¯åªæ˜¯ç®€å•çš„æ”¹å˜æ ¼å¼ï¼Œå¹¶æ²¡æœ‰å½»åº•è§£å†³ä¸Šé¢çš„é—®é¢˜çœŸæ­£è¦è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œä¸€å®šè¦åˆ©ç”¨promiseå†åŠ ä¸Šawaitå’Œasyncå…³é”®å­—å®ç°å¼‚æ­¥ä¼ åŒæ­¥&quot;">â€‹</a></h6></blockquote><h5 id="_2-promiseè¿è¡Œ" tabindex="-1">2.Promiseè¿è¡Œ=&gt; <a class="header-anchor" href="#_2-promiseè¿è¡Œ" aria-label="Permalink to &quot;2.Promiseè¿è¡Œ=&gt;&quot;">â€‹</a></h5><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//newçš„æ—¶å€™æ–¹æ³•ä½“å°±ç«‹åˆ»è¿è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//ä¸šåŠ¡ä»£ç }ï¼‰</span></span></code></pre></div><h5 id="_3-promiseçš„å‚æ•°è§£é‡Š" tabindex="-1">3.Promiseçš„å‚æ•°è§£é‡Š=&gt; <a class="header-anchor" href="#_3-promiseçš„å‚æ•°è§£é‡Š" aria-label="Permalink to &quot;3.Promiseçš„å‚æ•°è§£é‡Š=&gt;&quot;">â€‹</a></h5><ol><li><p>resolve:è¡¨ç¤ºæ–¹æ³•ä½“é‡Œå¤´æ‰§è¡ŒæˆåŠŸä¹‹åçš„å›è°ƒå‡½æ•°</p></li><li><p>reject:è¡¨ç¤ºæ–¹æ³•ä½“é‡Œå¤´å‡ºé”™åçš„å›è°ƒå‡½æ•°</p></li><li><p>Function(å‡½æ•°):æ”¯æŒå¤šå±‚åµŒå¥—çš„å›è°ƒå‡½æ•°ä½œä¸ºæ–¹æ³•ä½“å†…å®¹</p></li></ol><h5 id="-1" tabindex="-1"><a class="header-anchor" href="#-1" aria-label="Permalink to &quot;&quot;">â€‹</a></h5><h2 id="äºŒ-promise-await-async" tabindex="-1">äºŒ.Promise+await+async=&gt; <a class="header-anchor" href="#äºŒ-promise-await-async" aria-label="Permalink to &quot;äºŒ.Promise+await+async=&gt;&quot;">â€‹</a></h2><h5 id="_1-promise-å¼‚æ­¥" tabindex="-1">1)Promise==&gt;å¼‚æ­¥ <a class="header-anchor" href="#_1-promise-å¼‚æ­¥" aria-label="Permalink to &quot;1)Promise==&gt;å¼‚æ­¥&quot;">â€‹</a></h5><h5 id="_2-await-å¼‚æ­¥è½¬åŒæ­¥" tabindex="-1">2)await==&gt;å¼‚æ­¥è½¬åŒæ­¥ <a class="header-anchor" href="#_2-await-å¼‚æ­¥è½¬åŒæ­¥" aria-label="Permalink to &quot;2)await==&gt;å¼‚æ­¥è½¬åŒæ­¥&quot;">â€‹</a></h5><p>â€‹ 1.await å¯ä»¥ç†è§£ä¸ºæ˜¯ async wait çš„ç®€å†™ã€‚await å¿…é¡»å‡ºç°åœ¨ async å‡½æ•°å†…éƒ¨ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ã€‚</p><p>â€‹ 2.await åé¢å¯ä»¥è·Ÿä»»ä½•çš„JS è¡¨è¾¾å¼ã€‚è™½ç„¶è¯´ await å¯ä»¥ç­‰å¾ˆå¤šç±»å‹çš„ä¸œè¥¿ï¼Œä½†æ˜¯å®ƒæœ€ä¸»è¦çš„æ„å›¾æ˜¯ç”¨æ¥ç­‰å¾… Promise å¯¹è±¡çš„çŠ¶æ€è¢« resolvedã€‚å¦‚æœawaitçš„æ˜¯ promiseå¯¹è±¡ä¼šé€ æˆå¼‚æ­¥å‡½æ•°åœæ­¢æ‰§è¡Œå¹¶ä¸”ç­‰å¾… promise çš„ è§£å†³,å¦‚æœç­‰çš„æ˜¯æ­£å¸¸çš„è¡¨è¾¾å¼åˆ™ç«‹å³æ‰§è¡Œã€‚</p><h5 id="_3-async-åŒæ­¥è½¬å¼‚æ­¥" tabindex="-1">3)async==&gt;åŒæ­¥è½¬å¼‚æ­¥ <a class="header-anchor" href="#_3-async-åŒæ­¥è½¬å¼‚æ­¥" aria-label="Permalink to &quot;3)async==&gt;åŒæ­¥è½¬å¼‚æ­¥&quot;">â€‹</a></h5><ol><li>æ–¹æ³•ä½“å†…éƒ¨çš„æŸä¸ªè¡¨è¾¾å¼ä½¿ç”¨awaitä¿®é¥°ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•ä½“æ‰€å±æ–¹æ³•å¿…é¡»è¦ç”¨asyncä¿®é¥°æ‰€ä»¥ä½¿ç”¨awitæ–¹æ³•ä¼šè‡ªåŠ¨å‡çº§ä¸ºå¼‚æ­¥æ–¹æ³•</li></ol><h1 id="ğŸŒˆ-redis-mysqlæ•°æ®åº“å®‰è£…ä»¥åŠä½¿ç”¨" tabindex="-1">ğŸŒˆ Redis+Mysqlæ•°æ®åº“å®‰è£…ä»¥åŠä½¿ç”¨ <a class="header-anchor" href="#ğŸŒˆ-redis-mysqlæ•°æ®åº“å®‰è£…ä»¥åŠä½¿ç”¨" aria-label="Permalink to &quot;ğŸŒˆ  Redis+Mysqlæ•°æ®åº“å®‰è£…ä»¥åŠä½¿ç”¨&quot;">â€‹</a></h1><h2 id="ä¸€-redis-è¿œç¨‹å­—å…¸æœåŠ¡" tabindex="-1">ä¸€.Redis(è¿œç¨‹å­—å…¸æœåŠ¡) <a class="header-anchor" href="#ä¸€-redis-è¿œç¨‹å­—å…¸æœåŠ¡" aria-label="Permalink to &quot;ä¸€.Redis(è¿œç¨‹å­—å…¸æœåŠ¡)&quot;">â€‹</a></h2><h3 id="_1-redisçš„ç‰¹ç‚¹" tabindex="-1">1.Redisçš„ç‰¹ç‚¹: <a class="header-anchor" href="#_1-redisçš„ç‰¹ç‚¹" aria-label="Permalink to &quot;1.Redisçš„ç‰¹ç‚¹:&quot;">â€‹</a></h3><p>1)å·¥ä½œçš„æ—¶å€™ç”¨çš„æ˜¯ä»¥å†…å­˜ä½œä¸ºå‚¨å­˜åª’ä»‹,æ”¯æŒæŒä¹…åŒ–</p><h3 id="_2-redisçš„ä¼˜ç‚¹" tabindex="-1">2.Redisçš„ä¼˜ç‚¹: <a class="header-anchor" href="#_2-redisçš„ä¼˜ç‚¹" aria-label="Permalink to &quot;2.Redisçš„ä¼˜ç‚¹:&quot;">â€‹</a></h3><h6 id="_1-é€Ÿåº¦å¿«" tabindex="-1">1.é€Ÿåº¦å¿« <a class="header-anchor" href="#_1-é€Ÿåº¦å¿«" aria-label="Permalink to &quot;1.é€Ÿåº¦å¿«&quot;">â€‹</a></h6><blockquote><p>â€‹ (1) å› ä¸ºæ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼Œç±»ä¼¼äº HashMap ï¼ŒHashMap çš„ä¼˜åŠ¿å°±æ˜¯æŸ¥æ‰¾å’Œæ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O (1) ã€‚ (2) Redis æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Key-Value ç±»å‹çš„å†…å­˜æ•°æ®åº“ï¼Œå¾ˆåƒMemcached ï¼Œæ•´ä¸ªæ•°æ®åº“ç»Ÿç»ŸåŠ è½½åœ¨å†…å­˜å½“ä¸­è¿›è¡Œæ“ä½œï¼Œå®šæœŸé€šè¿‡<strong>å¼‚æ­¥æ“ä½œ</strong>æŠŠæ•°æ®åº“æ•°æ® flush åˆ°ç¡¬ç›˜ä¸Šè¿›è¡Œä¿å­˜ã€‚forkå­è¿›ç¨‹æŒä¹…åŒ–ã€‚ (3) å› ä¸ºæ˜¯çº¯å†…å­˜æ“ä½œï¼ŒRedis çš„æ€§èƒ½éå¸¸å‡ºè‰²ï¼Œæ¯ç§’å¯ä»¥å¤„ç†è¶…è¿‡ 10 ä¸‡æ¬¡è¯»å†™æ“ä½œï¼Œæ˜¯å·²çŸ¥æ€§èƒ½æœ€å¿«çš„ Key-Value æ•°æ®åº“ã€‚</p></blockquote><h6 id="_2-æ”¯æŒä¸°å¯Œæ•°æ®ç±»å‹-string-list-set-sorted-set-hash-ã€‚" tabindex="-1">2.æ”¯æŒä¸°å¯Œæ•°æ®ç±»å‹: String ï¼ŒListï¼ŒSetï¼ŒSorted Setï¼ŒHash ã€‚ <a class="header-anchor" href="#_2-æ”¯æŒä¸°å¯Œæ•°æ®ç±»å‹-string-list-set-sorted-set-hash-ã€‚" aria-label="Permalink to &quot;2.æ”¯æŒä¸°å¯Œæ•°æ®ç±»å‹: String ï¼ŒListï¼ŒSetï¼ŒSorted Setï¼ŒHash ã€‚&quot;">â€‹</a></h6><blockquote><p>Redis çš„å‡ºè‰²ä¹‹å¤„ä¸ä»…ä»…æ˜¯æ€§èƒ½ï¼ŒRedis æœ€å¤§çš„é­…åŠ›æ˜¯æ”¯æŒä¿å­˜å¤šç§æ•°æ®ç»“æ„ï¼Œæ­¤å¤–å•ä¸ª Value çš„æœ€å¤§é™åˆ¶æ˜¯1GBï¼Œä¸åƒ Memcachedåªèƒ½ä¿å­˜1MBçš„æ•°æ®ï¼Œå› æ­¤Rediså¯ä»¥ç”¨æ¥å®ç°å¾ˆå¤šæœ‰ç”¨çš„åŠŸèƒ½</p></blockquote><h6 id="_3-ä¸°å¯Œçš„ç‰¹æ€§" tabindex="-1">3.ä¸°å¯Œçš„ç‰¹æ€§ <a class="header-anchor" href="#_3-ä¸°å¯Œçš„ç‰¹æ€§" aria-label="Permalink to &quot;3.ä¸°å¯Œçš„ç‰¹æ€§&quot;">â€‹</a></h6><blockquote><p>è®¢é˜…å‘å¸ƒ Pub / Sub åŠŸèƒ½ Key è¿‡æœŸç­–ç•¥ äº‹åŠ¡ æ”¯æŒå¤šä¸ª DB è®¡æ•°</p></blockquote><h6 id="_4-æŒä¹…åŒ–å­˜å‚¨" tabindex="-1">4.æŒä¹…åŒ–å­˜å‚¨ <a class="header-anchor" href="#_4-æŒä¹…åŒ–å­˜å‚¨" aria-label="Permalink to &quot;4.æŒä¹…åŒ–å­˜å‚¨&quot;">â€‹</a></h6><blockquote><p>Redis æä¾› RDB å’Œ AOF ä¸¤ç§æ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨æ–¹æ¡ˆï¼Œè§£å†³å†…å­˜æ•°æ®åº“æœ€æ‹…å¿ƒçš„ä¸‡ä¸€ Redis æŒ‚æ‰ï¼Œæ•°æ®ä¼šæ¶ˆå¤±æ‰ã€‚</p></blockquote><h3 id="_3-redisçš„ç¼ºç‚¹" tabindex="-1">3.Redisçš„ç¼ºç‚¹: <a class="header-anchor" href="#_3-redisçš„ç¼ºç‚¹" aria-label="Permalink to &quot;3.Redisçš„ç¼ºç‚¹:&quot;">â€‹</a></h3><blockquote><p>1.ç”±äº Redis æ˜¯å†…å­˜æ•°æ®åº“ï¼Œæ‰€ä»¥ï¼Œå•å°æœºå™¨ï¼Œå­˜å‚¨çš„æ•°æ®é‡ï¼Œè·Ÿæœºå™¨æœ¬èº«çš„å†…å­˜å¤§å°ã€‚è™½ç„¶ Redis æœ¬èº«æœ‰Key è¿‡æœŸç­–ç•¥ï¼Œä½†æ˜¯è¿˜æ˜¯éœ€è¦æå‰é¢„ä¼°å’ŒèŠ‚çº¦å†…å­˜ã€‚å¦‚æœå†…å­˜å¢é•¿è¿‡å¿«ï¼Œéœ€è¦å®šæœŸåˆ é™¤æ•°æ®ã€‚</p><p>2.redisæ˜¯å•çº¿ç¨‹çš„ï¼Œå•å°æœåŠ¡å™¨æ— æ³•å……åˆ†åˆ©ç”¨å¤šæ ¸æœåŠ¡å™¨çš„CPU</p></blockquote><h3 id="_4-redis-window-64bit-ç‰ˆæœ¬çš„ä½¿ç”¨" tabindex="-1">4.Redis -window 64bit ç‰ˆæœ¬çš„ä½¿ç”¨=&gt; <a class="header-anchor" href="#_4-redis-window-64bit-ç‰ˆæœ¬çš„ä½¿ç”¨" aria-label="Permalink to &quot;4.Redis -window 64bit ç‰ˆæœ¬çš„ä½¿ç”¨=&gt;&quot;">â€‹</a></h3><h5 id="_1-å®‰è£…-å…å®‰è£…" tabindex="-1">1.å®‰è£…:å…å®‰è£… <a class="header-anchor" href="#_1-å®‰è£…-å…å®‰è£…" aria-label="Permalink to &quot;1.å®‰è£…:å…å®‰è£…&quot;">â€‹</a></h5><h5 id="_2-ä½¿ç”¨" tabindex="-1">2.ä½¿ç”¨: <a class="header-anchor" href="#_2-ä½¿ç”¨" aria-label="Permalink to &quot;2.ä½¿ç”¨:&quot;">â€‹</a></h5><h6 id="_1-åŒå‡»redis-server-exe" tabindex="-1">1.åŒå‡»redis-server.exe <a class="header-anchor" href="#_1-åŒå‡»redis-server-exe" aria-label="Permalink to &quot;1.åŒå‡»redis-server.exe&quot;">â€‹</a></h6><blockquote><p>Q: å¦‚æœå¯åŠ¨æŠ¥é”™å»ºè®®æŸ¥çœ‹é”™è¯¯æ—¥å¿—(æœ€éš¾çš„bug,æœ€éš¾çš„æ˜¯é™¤äº†bug,æ²¡æœ‰bug)</p><ul><li><pre><code>      eg:æ²¡æœ‰æ‰¾åˆ°é…ç½®æ–‡ä»¶
</code></pre></li><li><pre><code>      è§£å†³æªæ–½:åŸºäºcmdè¿è¡Œä¸‹é¢å‘½ä»¤æ¥è§£å†³(æ˜¾å¡çš„æŒ‡å®šé…ç½®0)
</code></pre></li><li><pre><code>      redis-server.exe redis.window-service.conf(è§£é‡Š:æŒ‡å®šä»¥åé¢é‚£ä¸ªä½ç½®)
</code></pre></li></ul></blockquote><h6 id="_2-redis-cli-exeåŒå‡»-å®¢æˆ·ç«¯æµ‹è¯•æ—¶å€™ä½¿ç”¨" tabindex="-1">2.redis-cli.exeåŒå‡»(å®¢æˆ·ç«¯æµ‹è¯•æ—¶å€™ä½¿ç”¨) <a class="header-anchor" href="#_2-redis-cli-exeåŒå‡»-å®¢æˆ·ç«¯æµ‹è¯•æ—¶å€™ä½¿ç”¨" aria-label="Permalink to &quot;2.redis-cli.exeåŒå‡»(å®¢æˆ·ç«¯æµ‹è¯•æ—¶å€™ä½¿ç”¨)&quot;">â€‹</a></h6><h6 id="_3-ç†Ÿç»ƒæŒæ¡ä¸¤ä¸ªå‘½ä»¤-set-key-value-get-key" tabindex="-1">3.ç†Ÿç»ƒæŒæ¡ä¸¤ä¸ªå‘½ä»¤: set key value , get key <a class="header-anchor" href="#_3-ç†Ÿç»ƒæŒæ¡ä¸¤ä¸ªå‘½ä»¤-set-key-value-get-key" aria-label="Permalink to &quot;3.ç†Ÿç»ƒæŒæ¡ä¸¤ä¸ªå‘½ä»¤: set key value   ,   get key&quot;">â€‹</a></h6><h3 id="_5-å®é™…æ“ä½œ-åŸºäºnodeæ¥è¿æ¥redis" tabindex="-1">5.å®é™…æ“ä½œ(åŸºäºnodeæ¥è¿æ¥redis)=&gt; <a class="header-anchor" href="#_5-å®é™…æ“ä½œ-åŸºäºnodeæ¥è¿æ¥redis" aria-label="Permalink to &quot;5.å®é™…æ“ä½œ(åŸºäºnodeæ¥è¿æ¥redis)=&gt;&quot;">â€‹</a></h3><h6 id="_1-å®‰è£…node-çš„redis-çš„ä¾èµ–åŒ…-npm-install-redis" tabindex="-1">1.å®‰è£…node çš„redis çš„ä¾èµ–åŒ…, npm install redis <a class="header-anchor" href="#_1-å®‰è£…node-çš„redis-çš„ä¾èµ–åŒ…-npm-install-redis" aria-label="Permalink to &quot;1.å®‰è£…node çš„redis çš„ä¾èµ–åŒ…, npm install redis&quot;">â€‹</a></h6><h6 id="_2-ç†Ÿç»ƒè°ƒåº¦redisçš„åŸºæœ¬api" tabindex="-1">2.ç†Ÿç»ƒè°ƒåº¦redisçš„åŸºæœ¬api <a class="header-anchor" href="#_2-ç†Ÿç»ƒè°ƒåº¦redisçš„åŸºæœ¬api" aria-label="Permalink to &quot;2.ç†Ÿç»ƒè°ƒåº¦redisçš„åŸºæœ¬api&quot;">â€‹</a></h6><h6 id="_3-ç™»é™†æˆåŠŸåå°†ç”¨æˆ·çš„ä¿¡æ¯å­˜å‚¨åœ¨redisé‡Œå¤´-å–è€Œä»£ä¹‹ä¸ç”¨session" tabindex="-1">3.ç™»é™†æˆåŠŸåå°†ç”¨æˆ·çš„ä¿¡æ¯å­˜å‚¨åœ¨redisé‡Œå¤´,å–è€Œä»£ä¹‹ä¸ç”¨session <a class="header-anchor" href="#_3-ç™»é™†æˆåŠŸåå°†ç”¨æˆ·çš„ä¿¡æ¯å­˜å‚¨åœ¨redisé‡Œå¤´-å–è€Œä»£ä¹‹ä¸ç”¨session" aria-label="Permalink to &quot;3.ç™»é™†æˆåŠŸåå°†ç”¨æˆ·çš„ä¿¡æ¯å­˜å‚¨åœ¨redisé‡Œå¤´,å–è€Œä»£ä¹‹ä¸ç”¨session&quot;">â€‹</a></h6><h6 id="_4-æ¯æ¬¡è·å–ç”¨æˆ·å…·ä½“çš„ä¿¡æ¯çš„æ—¶å€™ä¸èµ°æ•°æ®åº“-ç›´æ¥èµ°redis" tabindex="-1">4.æ¯æ¬¡è·å–ç”¨æˆ·å…·ä½“çš„ä¿¡æ¯çš„æ—¶å€™ä¸èµ°æ•°æ®åº“,ç›´æ¥èµ°redis <a class="header-anchor" href="#_4-æ¯æ¬¡è·å–ç”¨æˆ·å…·ä½“çš„ä¿¡æ¯çš„æ—¶å€™ä¸èµ°æ•°æ®åº“-ç›´æ¥èµ°redis" aria-label="Permalink to &quot;4.æ¯æ¬¡è·å–ç”¨æˆ·å…·ä½“çš„ä¿¡æ¯çš„æ—¶å€™ä¸èµ°æ•°æ®åº“,ç›´æ¥èµ°redis&quot;">â€‹</a></h6><h3 id="_6-redisutil-å°è£…å·¥å…·åŒ…" tabindex="-1">6.redisUtil(å°è£…å·¥å…·åŒ…)=&gt; <a class="header-anchor" href="#_6-redisutil-å°è£…å·¥å…·åŒ…" aria-label="Permalink to &quot;6.redisUtil(å°è£…å·¥å…·åŒ…)=&gt;&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> redis</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;redis&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> client</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> redis.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6379</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// const client = redis.createClient();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è·å–å½“å‰dbä¸­æ‰€æœ‰çš„key</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// function getdbnamelist(){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     // ç›¸å½“äºå‘½ä»¤ï¼ˆkeys *ï¼‰, è¿”å›listï¼ŒåŒ…å«å½“å‰dbæ‰€æœ‰keyçš„åå­—</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     client.keys(&#39;*&#39;,function(err,val){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//         console.log(val);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//         //callback(val);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * è®¾ç½®é”®å€¼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dbNum</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> åº“å·</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> é”®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> å€¼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> expire</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è¿‡æœŸæ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼Œå¯ä¸ºç©ºï¼Œä¸ºç©ºåˆ™ä¸è¿‡æœŸï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> set</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">expire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dbNum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;object&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`[redis]set key=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}  value=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}  expire=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">expire</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}  dbNum=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dbNum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dbNum) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        dbNum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        client.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dbNum,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è®¾ç½®åº“</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;redis set é€‰åº“å¤±è´¥ï¼š&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // throw new Error(&#39;redis set é€‰åº“å¤±è´¥ï¼š&#39;+err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                client.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key,value,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è®¾ç½®å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;redisæ’å…¥å¤±è´¥ï¼š&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        // throw new Error(&#39;redisæ’å…¥å¤±è´¥ï¼š&#39;+err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isNaN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(expire) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> expire</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            client.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">expire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parseInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(expire));</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è®¾ç½®è¿‡æœŸæ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * è·å–ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dbNum</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {Promise&lt;*&gt;}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dbNum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`[redis]get key=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} dbNum=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dbNum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dbNum) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        dbNum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        client.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dbNum, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//é“¾æ¥åº“</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;redis set é€‰åº“å¤±è´¥ï¼š&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // throw new Error(&#39;redis get é€‰åº“å¤±è´¥ï¼š&#39;+err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                client.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è·å–å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;redisè¯»å–å¤±è´¥ï¼š&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        // throw new Error(&#39;redis get è·å–å¤±è´¥ï¼š&#39;+err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    get,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    set,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // getays</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="äºŒ-mysql-å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ" tabindex="-1">äºŒ.Mysql(å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ) <a class="header-anchor" href="#äºŒ-mysql-å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ" aria-label="Permalink to &quot;äºŒ.Mysql(å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ)&quot;">â€‹</a></h2><h3 id="_1-å®‰è£…mysqlå‡†å¤‡å·¥ä½œ" tabindex="-1">1.å®‰è£…Mysqlå‡†å¤‡å·¥ä½œ <a class="header-anchor" href="#_1-å®‰è£…mysqlå‡†å¤‡å·¥ä½œ" aria-label="Permalink to &quot;1.å®‰è£…Mysqlå‡†å¤‡å·¥ä½œ&quot;">â€‹</a></h3><blockquote><p>é€‰æ‹©å¼•æ“ï¼ˆinnoDB(æ”¯æŒåäº”ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨innoDB) Myisam Memory(å†…å­˜æ•°æ®åº“)ï¼‰ é€‰æ‹©ç¼–ç  ï¼ˆä¸€å®šè¦ç”¨UTF-8ï¼‰ mysql ç‰ˆæœ¬ï¼šç›®å‰ä½¿ç”¨5.7ç‰ˆæœ¬ å®‰è£…ï¼ˆæœåŠ¡ç«¯ï¼‰ï¼š å®‰è£…ï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼š REPL(mysql -u ç”¨æˆ·å -p å›è½¦ å†è¾“å…¥å¯†ç ) NAVICATE (ç ´è§£) NAVITOR (åŠŸèƒ½æ¯”è¾ƒé½å…¨ï¼Œéœ€è‡ªå·±ä¸‹è½½)</p></blockquote><h3 id="_2-mysqlçš„è¿è¡ŒåŸç†" tabindex="-1">2.mysqlçš„è¿è¡ŒåŸç†: <a class="header-anchor" href="#_2-mysqlçš„è¿è¡ŒåŸç†" aria-label="Permalink to &quot;2.mysqlçš„è¿è¡ŒåŸç†:&quot;">â€‹</a></h3><pre><code>&gt; åˆ†æå™¨
       ä¼˜åŒ–å™¨
       æ‰§è¡Œå™¨(ç¼“å­˜)
</code></pre><h3 id="_3-å®é™…æ“ä½œ" tabindex="-1">3.å®é™…æ“ä½œ=&gt; <a class="header-anchor" href="#_3-å®é™…æ“ä½œ" aria-label="Permalink to &quot;3.å®é™…æ“ä½œ=&gt;&quot;">â€‹</a></h3><h6 id="_1-å®ç°å®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“" tabindex="-1">1.å®ç°å®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“ <a class="header-anchor" href="#_1-å®ç°å®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“" aria-label="Permalink to &quot;1.å®ç°å®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“&quot;">â€‹</a></h6><h6 id="_2-åŸºäºå®¢æˆ·ç«¯å®Œæˆä¸€å¼ è¡¨çš„åˆ›å»ºå’Œé…ç½®è¿‡ç¨‹" tabindex="-1">2.åŸºäºå®¢æˆ·ç«¯å®Œæˆä¸€å¼ è¡¨çš„åˆ›å»ºå’Œé…ç½®è¿‡ç¨‹ <a class="header-anchor" href="#_2-åŸºäºå®¢æˆ·ç«¯å®Œæˆä¸€å¼ è¡¨çš„åˆ›å»ºå’Œé…ç½®è¿‡ç¨‹" aria-label="Permalink to &quot;2.åŸºäºå®¢æˆ·ç«¯å®Œæˆä¸€å¼ è¡¨çš„åˆ›å»ºå’Œé…ç½®è¿‡ç¨‹&quot;">â€‹</a></h6><h6 id="_3-åŸºäºå®¢æˆ·ç«¯å®Œæˆmysqlè¯­æ³•çš„åŸºæœ¬è®²è§£" tabindex="-1">3.åŸºäºå®¢æˆ·ç«¯å®Œæˆmysqlè¯­æ³•çš„åŸºæœ¬è®²è§£ <a class="header-anchor" href="#_3-åŸºäºå®¢æˆ·ç«¯å®Œæˆmysqlè¯­æ³•çš„åŸºæœ¬è®²è§£" aria-label="Permalink to &quot;3.åŸºäºå®¢æˆ·ç«¯å®Œæˆmysqlè¯­æ³•çš„åŸºæœ¬è®²è§£&quot;">â€‹</a></h6><h6 id="_4-nodeæ¥æ“ä½œæ•°æ®åº“" tabindex="-1">4.NODEæ¥æ“ä½œæ•°æ®åº“=&gt; <a class="header-anchor" href="#_4-nodeæ¥æ“ä½œæ•°æ®åº“" aria-label="Permalink to &quot;4.NODEæ¥æ“ä½œæ•°æ®åº“=&gt;&quot;">â€‹</a></h6><blockquote><pre><code>4.1ä¸‹è½½mysqlçš„åŒ…
  	  4.2å®ç°nodeæ“ä½œmysqlçš„api
   	 4.3å®ç°ç”¨æˆ·æ³¨å†Œ-ç”¨æˆ·ä¿¡æ¯å…¥åº“ä¿å­˜
        4.4å®ç°ç”¨æˆ·ç™»å½•-æ ¹æ®æ•°æ®åº“ç”¨æˆ·ä¿¡æ¯éªŒè¯åˆæ³•æ€§
  	 4.5å®ç°è·å–å½“å‰ç”¨æˆ·çš„å…¨éƒ¨ä¿¡æ¯çš„åŠŸèƒ½
</code></pre></blockquote><h3 id="_4-æ•°æ®ç±»å‹" tabindex="-1">4.æ•°æ®ç±»å‹ <a class="header-anchor" href="#_4-æ•°æ®ç±»å‹" aria-label="Permalink to &quot;4.æ•°æ®ç±»å‹&quot;">â€‹</a></h3><h5 id="_1-jsåŸºç¡€æ•°æ®ç±»å‹" tabindex="-1">1.jsåŸºç¡€æ•°æ®ç±»å‹ <a class="header-anchor" href="#_1-jsåŸºç¡€æ•°æ®ç±»å‹" aria-label="Permalink to &quot;1.jsåŸºç¡€æ•°æ®ç±»å‹&quot;">â€‹</a></h5><blockquote><p>Boolean Number Undefined Object String Function</p></blockquote><h5 id="_2-æ•°æ®åº“åŸºæœ¬æ•°æ®ç±»å‹" tabindex="-1">2.æ•°æ®åº“åŸºæœ¬æ•°æ®ç±»å‹ <a class="header-anchor" href="#_2-æ•°æ®åº“åŸºæœ¬æ•°æ®ç±»å‹" aria-label="Permalink to &quot;2.æ•°æ®åº“åŸºæœ¬æ•°æ®ç±»å‹&quot;">â€‹</a></h5><blockquote><p>tinyint =&gt;boolean int =&gt;int varchar(length-&gt;é•¿åº¦å‚æ•°ï¼‰) =&gt;String mediumtext ==&gt;é•¿æ–‡æœ¬ datetime=&gt; æ—¶é—´Dateç±»å‹</p></blockquote><h3 id="_5-æ•°æ®åº“è‡ªåŠ¨å¡«å…¥åˆ›å»ºæ—¶é—´" tabindex="-1">5.æ•°æ®åº“è‡ªåŠ¨å¡«å…¥åˆ›å»ºæ—¶é—´ <a class="header-anchor" href="#_5-æ•°æ®åº“è‡ªåŠ¨å¡«å…¥åˆ›å»ºæ—¶é—´" aria-label="Permalink to &quot;5.æ•°æ®åº“è‡ªåŠ¨å¡«å…¥åˆ›å»ºæ—¶é—´&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>//åœ¨æ—¶é—´æˆ³é‚£ä¸ªæ•°æ®é»˜è®¤ä¸­è¾“å…¥ï¼Œè¡¨ç¤ºè‡ªåŠ¨å¡«å…¥æ—¶é—´</span></span>
<span class="line"><span>		CURRENT_TIMESTAMP</span></span></code></pre></div><h3 id="_6-mysqlå…¥é—¨" tabindex="-1">6.Mysqlå…¥é—¨ <a class="header-anchor" href="#_6-mysqlå…¥é—¨" aria-label="Permalink to &quot;6.Mysqlå…¥é—¨&quot;">â€‹</a></h3><h6 id="_1-mysqlå…¥é—¨æ•™å­¦-æ¦‚å¿µ" tabindex="-1">1.mysqlå…¥é—¨æ•™å­¦-æ¦‚å¿µ <a class="header-anchor" href="#_1-mysqlå…¥é—¨æ•™å­¦-æ¦‚å¿µ" aria-label="Permalink to &quot;1.mysqlå…¥é—¨æ•™å­¦-æ¦‚å¿µ&quot;">â€‹</a></h6><blockquote><p>æ•°æ®åº“=ã€‹excel</p><p>è¡¨ =ã€‹sheet</p><p>å­—æ®µ=ã€‹å­—æ®µ</p><p>ä¸»é”® =ã€‹å¦‚æœæŸä¸ªå­—æ®µæ˜¯é€æ¸ï¼Œé‚£ä¹ˆè¦æ±‚è¯¥å­—æ®µçš„å†…å®¹ä¸èƒ½ä¸ºç©ºä¸”ä¸é‡å¤</p><p>éç©º=ã€‹è¦æ±‚è¿™ä¸ªå­—æ®µä¸å«©ä¸ºç©º</p></blockquote><p>2.mysqlå…¥é—¨æ•™å­¦-åŸºç¡€æ•°æ®åº“è¯­å¥=&gt;</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">åˆ›å»ºæ•°æ®åº“ï¼šcreate database db_name character set utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">åˆ é™¤æ•°æ®åº“ï¼šdrop database db_name;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">åˆ‡æ¢æ•°æ®åº“ï¼šuse dbname</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">åˆ›å»ºè¡¨ï¼šcreate table </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">student</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id int primary key comment</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;è¿™é‡Œå†™æ³¨é‡Š&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,name </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),sex </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">char</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ,address </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">åˆ é™¤è¡¨ï¼šdrop table tb_name1,tb_name2;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">å†™å…¥æ•°æ®ï¼šå…¨å­—æ®µå†™å…¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">insert into student </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">001</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆ˜äº¦è²&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å¥³&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ¹–åŒ—æ­¦æ±‰&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">002</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ¨å¹‚&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å¥³&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åŒ—äº¬&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)ï¼›</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">å†™å…¥æ•°æ®ï¼šå¯é€‰å­—æ®µå†™å…¥ï¼Œå…¶ä»–å­—æ®µè‡ªå¢æˆ–æœ‰é»˜è®¤å€¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">insert into </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">student</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name,address) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆ˜äº¦è²&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ¹–åŒ—&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ¨å¹‚&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åŒ—äº¬&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆ˜è¯—è¯—&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åŒ—äº¬&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">åˆ é™¤æ•°æ®ï¼š</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> from tbname where æ¡ä»¶ï¼Œåªåˆ æ•°æ®ï¼Œä¸åˆ ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> from student where id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">003</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ä¿®æ”¹æ•°æ®ï¼šupdate student set key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value,key2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value2 where æ¡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">update student set address</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ¹–åŒ—&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> where id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">001</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æŸ¥çœ‹æ•°æ®ï¼šselect å­—æ®µ1ï¼Œå­—æ®µ2ï¼Œ.. from tbnameï¼›</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">select </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> from student;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æŸ¥çœ‹è¡¨çš„ç»“æ„ï¼šdesc tbnameï¼›</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ä¿®æ”¹è¡¨åï¼šalter table tb_name rename to tb_name_new;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ä¿®æ”¹å­—æ®µ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(åŒ…æ‹¬åç§°ï¼Œç±»å‹ï¼Œçº¦æŸ)ï¼šalter table tb_name change column_name column_name_new æ•°æ®ç±»å‹ çº¦æŸ;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ä¾‹ï¼šalter table student change sex æ€§åˆ« </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">char</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) not </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;å¥³&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ä¿®æ”¹å­—æ®µç±»å‹ï¼šalter table tb_name modify column_name ä¿®æ”¹åçš„å­—æ®µç±»å‹ï¼›</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æ·»åŠ å­—æ®µï¼šalter table è¡¨å add å­—æ®µå æ•°æ®ç±»å‹ çº¦æŸ </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">å­—æ®µä½ç½®</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(first,æˆ–è€…after xxx);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ä¾‹ï¼šalter table tb_name add column_name decimal not </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> after cno;ç¬¬ä¸€ä¸ªåˆ™ç”¨first</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">åˆ é™¤å­—æ®µï¼šalter table tb_name drop column_nameï¼›</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ä¿®æ”¹å­—æ®µçš„é»˜è®¤å€¼ï¼šalter table tb_name alter column_name set Default </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">666</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">åˆ é™¤å­—æ®µçš„é»˜è®¤å€¼ï¼šalter table tb_name alter column_name drop Default;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æŸ¥çœ‹å»ºè¡¨å‘½ä»¤ï¼šshow create table tbnameï¼›å†…å«è¡¨çš„ç¼–ç æ ¼å¼</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ä¿®æ”¹æ•°æ®åº“ç¼–ç æ ¼å¼ï¼šalter database </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æ•°æ®åº“å</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> character set utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ä¿®æ”¹è¡¨çš„ç¼–ç æ ¼å¼ï¼šalter table è¡¨å convert to character set utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//ç¬”è®°è®°è½½</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">è·å– idä¸º1å¹¶ä¸”accountä¸ºaçš„ç”¨æˆ·ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `user`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AND</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> account </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;a&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">è·å–åˆ°çš„ä¿¡æ¯åˆ†é¡µ  ç¬¬å‡ ä¸ªå¼€å§‹ï¼Œæ¯é¡µçš„ä¸ªæ•°</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `user`</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> LIMIT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æ ¹æ®å¯†ç åˆ†ç»„</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SELECT</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> COUNT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), pwd </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `user`</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> GROUP</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> BY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pwd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å·¦è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.name </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ç”¨æˆ·å&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b.name </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;è¯¾ç¨‹&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `user`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LEFT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JOIN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lesson b </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b.user_id</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æ›´æ–°ä¿®æ”¹</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UPDATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `user`</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1231&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1&#39;</span></span></code></pre></div><h3 id="_7-mysqlutil-æ•°æ®åº“å·¥å…·åŒ…" tabindex="-1">7.mysqlUtil(æ•°æ®åº“å·¥å…·åŒ…)=&gt; <a class="header-anchor" href="#_7-mysqlutil-æ•°æ®åº“å·¥å…·åŒ…" aria-label="Permalink to &quot;7.mysqlUtil(æ•°æ®åº“å·¥å…·åŒ…)=&gt;&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ“ä½œæ•°æ®åº“æ¨¡å— æ‰«åœ°åƒ§ 2019å¹´5æœˆ30æ—¥19:58:46</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mysql </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mysql&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> logPrefix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mysql</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pool </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mysql.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createPool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    host     : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user     : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;root&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    password : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;root&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    port     : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;3306&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    database : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;xunke725&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æ•°æ®åº“åç§°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * å¢åˆ æ”¹æŸ¥ é€šç”¨ç»„ä»¶  åŒæ­¥å†™æ³•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sql</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> å¢åˆ æ”¹æŸ¥sql å«å ä½ç¬¦</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> params</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è·Ÿå ä½ç¬¦é¡ºåºåŒ¹é…çš„å‚æ•°æ•°ç»„ï¼Œè¦æ±‚è·Ÿsqlçš„å ä½ç¬¦æ•°é‡ä¸€æ ·å¤š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> exec</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è¿”å›ä¸€ä¸ª Promise</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            pool.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getConnection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    //queryæ‰§è¡Œsqlè¯­å¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    connection.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sql, params, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">results</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                          //  reject(err)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logPrefix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}result : ${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">results</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                            resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(results)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        // ç»“æŸä¼šè¯ é‡Šæ”¾é“¾æ¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        connection.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">release</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * å°†æ‰€æœ‰çš„å‚æ•°æ ¼å¼åŒ–æˆæ•°ç»„ å‚æ•°æ˜¯å¯å˜å‚æ•°ï¼ˆå¯å˜å‚æ•°åœ¨å‡½æ•°å£°æ˜çš„æ—¶å€™ä¸å†™ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {Array}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> formatParams</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //jsä¸­æœ‰ä¸ªå˜é‡arguments,å¯ä»¥è®¿é—®æ‰€æœ‰ä¼ å…¥çš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> l; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        array.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> array;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {exec, formatParams};</span></span></code></pre></div><h3 id="_8-æˆ‘çš„æ•°æ®åº“çº¿ç¨‹æ± å°è£…ä»£ç " tabindex="-1">8.æˆ‘çš„æ•°æ®åº“çº¿ç¨‹æ± å°è£…ä»£ç  <a class="header-anchor" href="#_8-æˆ‘çš„æ•°æ®åº“çº¿ç¨‹æ± å°è£…ä»£ç " aria-label="Permalink to &quot;8.æˆ‘çš„æ•°æ®åº“çº¿ç¨‹æ± å°è£…ä»£ç &quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mysql</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mysql&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mysql.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createPool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    host: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;root&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    password: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;root&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    port: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;3306&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    database: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vue_store&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // timezone: &#39;+08:00&#39; //ä¸œå…«æ—¶åŒº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    timezone: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;local&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * è‡ªå·±å°è£…çš„æ•°æ®æ¨¡å‹çš„åŸºç±»</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * å°è£…äº†æ•°æ®åº“æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * é€šç”¨æŸ¥è¯¢æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sql</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è¦æ‰§è¡Œçš„SQLè¯­å¥</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {Array}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> params</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ç»™SQLè¯­å¥çš„å ä½ç¬¦è¿›è¡Œèµ‹å€¼çš„å‚æ•°æ•°ç»„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            pool.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getConnection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    connection.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">release</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    //queryæ‰§è¡Œsqlè¯­å¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    connection.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sql, params, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">results</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        //åœ¨å¤–éƒ¨ç”¨catchæˆªå–</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                             reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                            resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(results)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        // ç»“æŸä¼šè¯ é‡Šæ”¾é“¾æ¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        connection.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">release</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> formatParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //jsä¸­æœ‰ä¸ªå˜é‡arguments,å¯ä»¥è®¿é—®æ‰€æœ‰ä¼ å…¥çš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> l; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            array.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> array;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h1 id="ğŸŒˆ-é‡åˆ°é—®é¢˜ä»¥åŠè§£å†³" tabindex="-1">ğŸŒˆ é‡åˆ°é—®é¢˜ä»¥åŠè§£å†³ <a class="header-anchor" href="#ğŸŒˆ-é‡åˆ°é—®é¢˜ä»¥åŠè§£å†³" aria-label="Permalink to &quot;ğŸŒˆ é‡åˆ°é—®é¢˜ä»¥åŠè§£å†³&quot;">â€‹</a></h1><h4 id="_1-æ§åˆ¶å°æŠ¥é”™error-expected-payload-to-be-a-plain-object" tabindex="-1">1.æ§åˆ¶å°æŠ¥é”™Error: Expected &quot;payload&quot; to be a plain object <a class="header-anchor" href="#_1-æ§åˆ¶å°æŠ¥é”™error-expected-payload-to-be-a-plain-object" aria-label="Permalink to &quot;1.æ§åˆ¶å°æŠ¥é”™Error: Expected &quot;payload&quot; to be a plain object&quot;">â€‹</a></h4><p>â€‹ 1.é—®é¢˜å‡ºç°åœºæ™¯</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//signç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯å¯¹è±¡ ```````````!!!!!!!!!!!!!!!!!é‡ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//çŠ¯çš„é”™è¯¯:ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°å…¶å®å¹¶æ²¡æœ‰è½¬åŒ–å¥½å¯¼è‡´æŠ¥é”™</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(jwtUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({id:loginSuss[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].id},global.globalKey,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><p>â€‹ 2)è§£å†³æ–¹å¼</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æ‹¦æˆªå™¨,ä¼ å…¥å‚æ•°é”™è¯¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">é”™è¯¯ä»£ç ï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jwt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;app.get(superSecret)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">è§£å†³ä»£ç ï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">var token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jwt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toJSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), â€˜app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(superSecret)â€™,</span></span></code></pre></div><h4 id="_2-æ§åˆ¶å°æŠ¥é”™uncaught-typeerror-cannot-read-property-setitem-of-undefined" tabindex="-1">2.æ§åˆ¶å°æŠ¥é”™Uncaught TypeError: Cannot read property &#39;setItem&#39; of undefined <a class="header-anchor" href="#_2-æ§åˆ¶å°æŠ¥é”™uncaught-typeerror-cannot-read-property-setitem-of-undefined" aria-label="Permalink to &quot;2.æ§åˆ¶å°æŠ¥é”™Uncaught TypeError: Cannot read property &#39;setItem&#39; of undefined&quot;">â€‹</a></h4><p>1)é—®é¢˜å‡ºç°åœºæ™¯</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//localStorageå†™æˆlocalstorageå¯¼è‡´å˜æˆå£°æ˜ä¸€ä¸ªwindowå˜é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.localstorage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,result);</span></span></code></pre></div><p>2)è§£å†³æ–¹å¼</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//ç™»é™†æˆåŠŸåå†™å…¥localStorageçš„token ~~~~~!!!!!!!!Sæœªå¤§å†™</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.localStorage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,result);</span></span></code></pre></div><h4 id="_3-ç”±äºå°†ç™»å½•ä»¥å¤–çš„è·¯å¾„æ‹¦æˆª-å¯¼è‡´å›¾ç‰‡éªŒè¯ç ä»¥åŠå…¶ä»–çš„éƒ½æ— æ•ˆä¸”ä¸æ˜¾ç¤º" tabindex="-1">3.ç”±äºå°†ç™»å½•ä»¥å¤–çš„è·¯å¾„æ‹¦æˆª å¯¼è‡´å›¾ç‰‡éªŒè¯ç ä»¥åŠå…¶ä»–çš„éƒ½æ— æ•ˆä¸”ä¸æ˜¾ç¤º <a class="header-anchor" href="#_3-ç”±äºå°†ç™»å½•ä»¥å¤–çš„è·¯å¾„æ‹¦æˆª-å¯¼è‡´å›¾ç‰‡éªŒè¯ç ä»¥åŠå…¶ä»–çš„éƒ½æ— æ•ˆä¸”ä¸æ˜¾ç¤º" aria-label="Permalink to &quot;3.ç”±äºå°†ç™»å½•ä»¥å¤–çš„è·¯å¾„æ‹¦æˆª å¯¼è‡´å›¾ç‰‡éªŒè¯ç ä»¥åŠå…¶ä»–çš„éƒ½æ— æ•ˆä¸”ä¸æ˜¾ç¤º&quot;">â€‹</a></h4><p>1)é—®é¢˜å‡ºç°åœºæ™¯</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æ£€æŸ¥è·¯ç”± å†³å®šæ˜¯å¦æ‹¦æˆª,``````````~~~~~~~~!!!!!çŠ¯çš„é”™è¯¯:å°†é™¤äº†ç™»é™†å¤–çš„å…¨éƒ¨æ‹¦æˆªäº†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/users/login&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();}</span></span></code></pre></div><p>2)è§£å†³æ–¹å¼</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æ­¤å¤„æˆ‘å°†æ‰€æœ‰userçš„è·¯å¾„æš‚æ—¶éƒ½æ”¾å‡ºæ¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/users/login&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {  </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();}</span></span></code></pre></div><h4 id="_4-promise-await-asyncçš„ä½¿ç”¨ç›¸å…³é—®é¢˜" tabindex="-1">4.Promise+await+asyncçš„ä½¿ç”¨ç›¸å…³é—®é¢˜ <a class="header-anchor" href="#_4-promise-await-asyncçš„ä½¿ç”¨ç›¸å…³é—®é¢˜" aria-label="Permalink to &quot;4.Promise+await+asyncçš„ä½¿ç”¨ç›¸å…³é—®é¢˜&quot;">â€‹</a></h4><p>1)é—®é¢˜å‡ºç°åœºæ™¯</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> login</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loginSuss</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mysqlUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(loginSql,mysqlUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">formatParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>2)è§£å†³</p><p>mysqlUtil.exec()å†…æ˜¯ä¸€ä¸ªPromise,éœ€è¦awaitå¼‚æ­¥è½¬åŒæ­¥,å¦å‡ºå¾—åˆ°çš„è¿”å›å€¼å°†ä¼šæ˜¯ä¸€ä¸ªæŒ‚èµ·çš„Promiseå¯¹è±¡</p><p>åŠ å®Œåè¦åœ¨å¤–éƒ¨loginå‡½æ•°ä¸ŠåŠ async,å°†æ•´ä½“è½¬ä¸ºå¼‚æ­¥æ–¹æ³•,å†…éƒ¨ç”±awaitä¹Ÿå¿…é¡»åŠ ä¸Šè¿™ä¸ª</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> login</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loginSuss</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mysqlUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(loginSql,mysqlUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">formatParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h1 id="ğŸŒˆ-pm2-ã€nginxçš„æ¦‚å¿µä¸ä½¿ç”¨" tabindex="-1">ğŸŒˆ pm2 ã€nginxçš„æ¦‚å¿µä¸ä½¿ç”¨ <a class="header-anchor" href="#ğŸŒˆ-pm2-ã€nginxçš„æ¦‚å¿µä¸ä½¿ç”¨" aria-label="Permalink to &quot;ğŸŒˆ pm2  ã€nginxçš„æ¦‚å¿µä¸ä½¿ç”¨&quot;">â€‹</a></h1><h3 id="ä¸€-pm2å‘½ä»¤" tabindex="-1">ä¸€.pm2å‘½ä»¤ <a class="header-anchor" href="#ä¸€-pm2å‘½ä»¤" aria-label="Permalink to &quot;ä¸€.pm2å‘½ä»¤&quot;">â€‹</a></h3><h5 id="_1-pm2çš„ä½¿ç”¨" tabindex="-1">1.pm2çš„ä½¿ç”¨ <a class="header-anchor" href="#_1-pm2çš„ä½¿ç”¨" aria-label="Permalink to &quot;1.pm2çš„ä½¿ç”¨&quot;">â€‹</a></h5><blockquote><p>è¿›ç¨‹å®ˆå«: 1.ç›‘æ§å½“å‰çš„é¡¹ç›®çš„èµ„æºçš„æ¶ˆè€—æƒ…å†µ 2.å®ç°å¯¹å½“å‰çš„é¡¹ç›®çš„çƒ­éƒ¨ç½²</p></blockquote><h5 id="_2-å®é™…æ“ä½œ" tabindex="-1">2..å®é™…æ“ä½œ <a class="header-anchor" href="#_2-å®é™…æ“ä½œ" aria-label="Permalink to &quot;2..å®é™…æ“ä½œ&quot;">â€‹</a></h5><h6 id="_1-pm2å®‰è£…" tabindex="-1">1.pm2å®‰è£… <a class="header-anchor" href="#_1-pm2å®‰è£…" aria-label="Permalink to &quot;1.pm2å®‰è£…&quot;">â€‹</a></h6><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>	 npm install  pm2 -g</span></span></code></pre></div><h6 id="_2-æ£€éªŒæ˜¯å¦ç”±å®‰è£…æˆåŠŸ" tabindex="-1">2.æ£€éªŒæ˜¯å¦ç”±å®‰è£…æˆåŠŸ: <a class="header-anchor" href="#_2-æ£€éªŒæ˜¯å¦ç”±å®‰è£…æˆåŠŸ" aria-label="Permalink to &quot;2.æ£€éªŒæ˜¯å¦ç”±å®‰è£…æˆåŠŸ:&quot;">â€‹</a></h6><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> npm list åŒ…å -g</span></span></code></pre></div><h6 id="_3-äº†è§£ä¸‹é¢çš„å‘½ä»¤çš„ä½¿ç”¨ä»¥åŠé¡ºåº" tabindex="-1">3.äº†è§£ä¸‹é¢çš„å‘½ä»¤çš„ä½¿ç”¨ä»¥åŠé¡ºåº <a class="header-anchor" href="#_3-äº†è§£ä¸‹é¢çš„å‘½ä»¤çš„ä½¿ç”¨ä»¥åŠé¡ºåº" aria-label="Permalink to &quot;3.äº†è§£ä¸‹é¢çš„å‘½ä»¤çš„ä½¿ç”¨ä»¥åŠé¡ºåº&quot;">â€‹</a></h6><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>    pm2 init    				##åˆ›å»ºpm2é…ç½®æ–‡ä»¶</span></span>
<span class="line"><span>    pm2 start bin/www   ##å¯åŠ¨æœåŠ¡å™¨ bin/wwwè¡¨ç¤ºè¦è¿è¡Œçš„è„šæœ¬,expressé¡¹ç›®å°±</span></span>
<span class="line"><span>    pm2 list            ##æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span></span>
<span class="line"><span>    pm2 log             ##æŸ¥çœ‹æ—¥å¿—</span></span>
<span class="line"><span>    pm2 restart www     ##é‡å¯åº”ç”¨ wwwæ˜¯ pm2å¯åŠ¨è¿›ç¨‹çš„åç§°</span></span>
<span class="line"><span>    pm2 stop www        ##åœæ­¢åº”ç”¨ wwwæ˜¯ pm2å¯åŠ¨è¿›ç¨‹çš„åç§°(ä¹Ÿå¯ä»¥è¾“å…¥id)</span></span>
<span class="line"><span>    pm2 delete www      ##å¸è½½åº”ç”¨(å³ç»ˆæ­¢è¿è¡Œ) wwwæ˜¯ pm2å¯åŠ¨è¿›ç¨‹çš„åç§°(ä¹Ÿå¯ä»¥è¾“å…¥id)</span></span>
<span class="line"><span>    pm2 monit           ##å®æ—¶ç›‘æ§cpu</span></span></code></pre></div><h6 id="_4-ecosystem-config-jsä¿®æ”¹" tabindex="-1">4.ecosystem.config.jsä¿®æ”¹ <a class="header-anchor" href="#_4-ecosystem-config-jsä¿®æ”¹" aria-label="Permalink to &quot;4.ecosystem.config.jsä¿®æ”¹&quot;">â€‹</a></h6><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  apps : [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      //åˆ é™¤appsé‡Œé¢æ‰€æœ‰å…ƒç´ ,è¿™äº›éƒ½æ˜¯å¤šä½™çš„,ç„¶åæ·»åŠ ä»¥ä¸‹å…ƒç´ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          script: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bin/www&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          //ç›‘å¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          watch: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span></code></pre></div><h3 id="äºŒ-nginx" tabindex="-1">äºŒ.<strong>Nginx</strong> <a class="header-anchor" href="#äºŒ-nginx" aria-label="Permalink to &quot;äºŒ.**Nginx**&quot;">â€‹</a></h3><h4 id="_1-äº†è§£nginx" tabindex="-1">1. äº†è§£Nginx: <a class="header-anchor" href="#_1-äº†è§£nginx" aria-label="Permalink to &quot;1. äº†è§£Nginx:&quot;">â€‹</a></h4><blockquote><p>Nginxæ˜¯ä¸€æ¬¾<a href="https://baike.baidu.com/item/%E8%BD%BB%E9%87%8F%E7%BA%A7/10002835" target="_blank" rel="noreferrer">è½»é‡çº§</a>çš„<a href="https://baike.baidu.com/item/Web/150564" target="_blank" rel="noreferrer">Web</a> æœåŠ¡å™¨/<a href="https://baike.baidu.com/item/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/7793488" target="_blank" rel="noreferrer">åå‘ä»£ç†</a>æœåŠ¡å™¨åŠ<a href="https://baike.baidu.com/item/%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6/111106" target="_blank" rel="noreferrer">ç”µå­é‚®ä»¶</a>ï¼ˆIMAP/POP3ï¼‰ä»£ç†æœåŠ¡å™¨ï¼Œåœ¨BSD-like åè®®ä¸‹å‘è¡Œã€‚å…¶ç‰¹ç‚¹æ˜¯å æœ‰å†…å­˜å°‘ï¼Œ<a href="https://baike.baidu.com/item/%E5%B9%B6%E5%8F%91/11024806" target="_blank" rel="noreferrer">å¹¶å‘</a>èƒ½åŠ›å¼ºï¼Œäº‹å®ä¸Šnginxçš„å¹¶å‘èƒ½åŠ›åœ¨åŒç±»å‹çš„ç½‘é¡µæœåŠ¡å™¨ä¸­è¡¨ç°è¾ƒå¥½ï¼Œä¸­å›½å¤§é™†ä½¿ç”¨nginxç½‘ç«™ç”¨æˆ·æœ‰ï¼šç™¾åº¦ã€<a href="https://baike.baidu.com/item/%E4%BA%AC%E4%B8%9C/210931" target="_blank" rel="noreferrer">äº¬ä¸œ</a>ã€<a href="https://baike.baidu.com/item/%E6%96%B0%E6%B5%AA/125692" target="_blank" rel="noreferrer">æ–°æµª</a>ã€<a href="https://baike.baidu.com/item/%E7%BD%91%E6%98%93/185754" target="_blank" rel="noreferrer">ç½‘æ˜“</a>ã€<a href="https://baike.baidu.com/item/%E8%85%BE%E8%AE%AF/112204" target="_blank" rel="noreferrer">è…¾è®¯</a>ã€<a href="https://baike.baidu.com/item/%E6%B7%98%E5%AE%9D/145661" target="_blank" rel="noreferrer">æ·˜å®</a>ç­‰ã€‚</p></blockquote><h4 id="_2-nginxçš„ä½œç”¨" tabindex="-1">2.Nginxçš„ä½œç”¨: <a class="header-anchor" href="#_2-nginxçš„ä½œç”¨" aria-label="Permalink to &quot;2.Nginxçš„ä½œç”¨:&quot;">â€‹</a></h4><blockquote><p>1)åå‘ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜ 2)è´Ÿè½½å‡è¡¡ 3)ç¿»å¢™......</p></blockquote><h4 id="_3-nginxçš„ä¸‰ä¸ªbatæ–‡ä»¶" tabindex="-1">3.Nginxçš„ä¸‰ä¸ªbatæ–‡ä»¶=&gt; <a class="header-anchor" href="#_3-nginxçš„ä¸‰ä¸ªbatæ–‡ä»¶" aria-label="Permalink to &quot;3.Nginxçš„ä¸‰ä¸ªbatæ–‡ä»¶=&gt;&quot;">â€‹</a></h4><h6 id="_3-1-start-bat" tabindex="-1">3.1)start.bat=&gt; <a class="header-anchor" href="#_3-1-start-bat" aria-label="Permalink to &quot;3.1)start.bat=&gt;&quot;">â€‹</a></h6><div class="language-bat vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nginx -c ./conf/nginx.conf</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> success</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">pause</span></span></code></pre></div><h6 id="_3-2-stop-bat" tabindex="-1">3.2)stop.bat=&gt; <a class="header-anchor" href="#_3-2-stop-bat" aria-label="Permalink to &quot;3.2)stop.bat=&gt;&quot;">â€‹</a></h6><div class="language-bat vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nginx.exe -s stop</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> success</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">pause</span></span></code></pre></div><h6 id="_3-3-reload-bat" tabindex="-1">3.3)reload.bat=&gt; <a class="header-anchor" href="#_3-3-reload-bat" aria-label="Permalink to &quot;3.3)reload.bat=&gt;&quot;">â€‹</a></h6><div class="language-bat vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nginx.exe -s reload</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> success</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">pause</span></span></code></pre></div><h4 id="_4-nginxå®æ“" tabindex="-1">4.Nginxå®æ“=&gt; <a class="header-anchor" href="#_4-nginxå®æ“" aria-label="Permalink to &quot;4.Nginxå®æ“=&gt;&quot;">â€‹</a></h4><h6 id="_4-1-é…ç½®start-bat-stop-bat-reload-bat" tabindex="-1">4.1)é…ç½®start.bat stop.bat reload.bat <a class="header-anchor" href="#_4-1-é…ç½®start-bat-stop-bat-reload-bat" aria-label="Permalink to &quot;4.1)é…ç½®start.bat stop.bat reload.bat&quot;">â€‹</a></h6><ol><li>start.bat :å¯åŠ¨nginx(é€šè¿‡start.batå¯åŠ¨çš„nginx,åƒä¸‡ä¸èƒ½å¤šæ¬¡å¯åŠ¨,å¦åˆ™ä¼šå‡ºç°å¤šä¸ªnginxå®ä¾‹,è¿™ä¸ªæ—¶å€™stopæ¥ä¸åŠäº† stopåªèƒ½å…³é—­æœ€åä¸€ä¸ª,ä½†æ˜¯å¦‚æœçœŸçš„çŠ¯é”™äº†,æ€ä¹ˆå…³é—­ä»¥å‰å‘¢:åœ¨ä»»åŠ¡æ ,å³å‡»æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨==&gt;è¿›å…¥åˆ°è¯¦ç»†æœåŠ¡åˆ—è¡¨,æ‰¾åˆ°nginxæœåŠ¡,ç»Ÿç»Ÿç»“æŸ)</li><li>stop.bat :åœç”¨nginx(åœ¨startä¹‹åå¯ä»¥ç”¨)</li><li>reload.bat:é‡å¯nginx(åœ¨startä¹‹åå¯ä»¥ç”¨)</li><li>é€šè¿‡cmdæ‰§è¡Œstart.batæ¥å¯åŠ¨nginxå¯åŠ¨ä¹‹å,åƒä¸‡åˆ«å…³é—­ä¸²å£</li></ol><h6 id="_4-2-nginxå‡ºç°è®¿é—®ä¸äº†çš„æƒ…å†µ" tabindex="-1">4.2)nginxå‡ºç°è®¿é—®ä¸äº†çš„æƒ…å†µ=&gt; <a class="header-anchor" href="#_4-2-nginxå‡ºç°è®¿é—®ä¸äº†çš„æƒ…å†µ" aria-label="Permalink to &quot;4.2)nginxå‡ºç°è®¿é—®ä¸äº†çš„æƒ…å†µ=&gt;&quot;">â€‹</a></h6><ol><li>åªæœ‰ä¸€ç§:é…ç½®å‡ºç°é—®é¢˜=&gt;å­¦ä¼šçœ‹æ—¥å¿—: E:\nginx\logs\error.logå»çœ‹æ—¥å¿—å†…å®¹</li></ol><h4 id="_5-é…ç½®æ–‡ä»¶" tabindex="-1">5.é…ç½®æ–‡ä»¶=&gt; <a class="header-anchor" href="#_5-é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;5.é…ç½®æ–‡ä»¶=&gt;&quot;">â€‹</a></h4><h5 id="_5-1-é…ç½®æ–‡ä»¶ä½ç½®" tabindex="-1">5.1)é…ç½®æ–‡ä»¶ä½ç½®: <a class="header-anchor" href="#_5-1-é…ç½®æ–‡ä»¶ä½ç½®" aria-label="Permalink to &quot;5.1)é…ç½®æ–‡ä»¶ä½ç½®:&quot;">â€‹</a></h5><blockquote><p>E:\nginx\conf\nginx.conf</p></blockquote><h5 id="_5-2-é…ç½®æ–‡ä»¶æœåŠ¡å™¨é…ç½®éƒ¨åˆ†è§£é‡Š" tabindex="-1">5.2)é…ç½®æ–‡ä»¶æœåŠ¡å™¨é…ç½®éƒ¨åˆ†è§£é‡Š=&gt; <a class="header-anchor" href="#_5-2-é…ç½®æ–‡ä»¶æœåŠ¡å™¨é…ç½®éƒ¨åˆ†è§£é‡Š" aria-label="Permalink to &quot;5.2)é…ç½®æ–‡ä»¶æœåŠ¡å™¨é…ç½®éƒ¨åˆ†è§£é‡Š=&gt;&quot;">â€‹</a></h5><div class="language-bat vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        listen       80;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        #//ç›‘å¬çš„åŸŸå</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        //æœ¬åœ°IPåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        server_name  localhost;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        #charset koi8-r;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        #access_log  logs/host.access.log  main;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           #//å¦‚æœæ˜¯localhost 80ç«¯å£   å°±è®¿é—®æ ¹ç›®å½•ä¸‹çš„index.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        location / {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            root   html;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            index  index.html index.htm;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        //æµ‹è¯•é™æ€æ–‡ä»¶æœåŠ¡å™¨é…ç½®(æ³¨æ„æ–œæ )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        location /xk {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              alias  E:/fyWebStrom/Xunke_Code/day7_27_28/public;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		location /cross/ {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			proxy_pass  http://localhost:3000/;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			add_header  to http://localhost:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><h5 id="_5-3-é™æ€æ–‡ä»¶æœåŠ¡å™¨é…ç½®-æ³¨æ„æ–œæ " tabindex="-1">5.3)é™æ€æ–‡ä»¶æœåŠ¡å™¨é…ç½®(æ³¨æ„æ–œæ ) <a class="header-anchor" href="#_5-3-é™æ€æ–‡ä»¶æœåŠ¡å™¨é…ç½®-æ³¨æ„æ–œæ " aria-label="Permalink to &quot;5.3)é™æ€æ–‡ä»¶æœåŠ¡å™¨é…ç½®(æ³¨æ„æ–œæ )&quot;">â€‹</a></h5><h6 id="_5-3-1-æ–¹å¼ä¸€" tabindex="-1">5.3.1)æ–¹å¼ä¸€: <a class="header-anchor" href="#_5-3-1-æ–¹å¼ä¸€" aria-label="Permalink to &quot;5.3.1)æ–¹å¼ä¸€:&quot;">â€‹</a></h6><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>location /qn { alias  E:/fyWebStrom/Xunke_Code/day7_27_28/public;	}</span></span>
<span class="line"><span>  aliasè¡¨ç¤ºåˆ«å,æ„æ€å°±æ˜¯å½“æˆ‘ä»¬è¯·æ±‚çš„urié‡Œå¤´åŒ…å«äº†qn,é‚£ä¹ˆå°±ä¼šè‡ªåŠ¨å»è®¿é—®aliasæŒ‡å‘çš„è·¯å¾„ä¸‹çš„æ–‡ä»¶</span></span>
<span class="line"><span>    eg:</span></span>
<span class="line"><span>    http://localhost/qn/test.html</span></span>
<span class="line"><span>    è¡¨ç¤º:è¯·æ±‚aliasè·¯å¾„ä¸‹çš„test.html</span></span></code></pre></div><h6 id="_5-3-2-æ–¹å¼äºŒ" tabindex="-1">5.3.2)æ–¹å¼äºŒ: <a class="header-anchor" href="#_5-3-2-æ–¹å¼äºŒ" aria-label="Permalink to &quot;5.3.2)æ–¹å¼äºŒ:&quot;">â€‹</a></h6><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>location  /qn{</span></span>
<span class="line"><span>    root E:/fyWebStrom/Xunke_Code/day7_27_28/public/Demo.html</span></span>
<span class="line"><span>    //è¡¨ç¤ºæ ¹, è¯·æ±‚rootè·¯å¾„ä¸‹çš„qnæ–‡ä»¶å¤¹ä¸‹çš„test.html</span></span>
<span class="line"><span>}</span></span></code></pre></div><h4 id="_6-è·¨åŸŸä»£ç†" tabindex="-1">6.è·¨åŸŸä»£ç†=&gt; <a class="header-anchor" href="#_6-è·¨åŸŸä»£ç†" aria-label="Permalink to &quot;6.è·¨åŸŸä»£ç†=&gt;&quot;">â€‹</a></h4><h5 id="_6-1-é…ç½®æ–‡ä»¶é…ç½®" tabindex="-1">6.1)é…ç½®æ–‡ä»¶é…ç½®: <a class="header-anchor" href="#_6-1-é…ç½®æ–‡ä»¶é…ç½®" aria-label="Permalink to &quot;6.1)é…ç½®æ–‡ä»¶é…ç½®:&quot;">â€‹</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>server {</span></span>
<span class="line"><span>        listen       80;</span></span>
<span class="line"><span>        server_name  localhost;</span></span>
<span class="line"><span>        #charset koi8-r;</span></span>
<span class="line"><span>        #access_log  logs/host.access.log  main;</span></span>
<span class="line"><span>        //nginxè·¨åŸŸé…ç½®</span></span>
<span class="line"><span>            location /cross/ {</span></span>
<span class="line"><span>        proxy_pass http://localhost:3000/;</span></span>
<span class="line"><span>        add_header to http://localhost:3000;</span></span>
<span class="line"><span>   } }</span></span></code></pre></div><h5 id="_6-2-é…ç½®proxy-passä»£ç†è½¬å‘å››ç§æ–¹å¼" tabindex="-1">6.2)é…ç½®proxy_passä»£ç†è½¬å‘å››ç§æ–¹å¼=&gt; <a class="header-anchor" href="#_6-2-é…ç½®proxy-passä»£ç†è½¬å‘å››ç§æ–¹å¼" aria-label="Permalink to &quot;6.2)é…ç½®proxy_passä»£ç†è½¬å‘å››ç§æ–¹å¼=&gt;&quot;">â€‹</a></h5><h6 id="_6-2-1-é…ç½®è·¯å¾„åŸç†" tabindex="-1">6.2.1)é…ç½®è·¯å¾„åŸç† <a class="header-anchor" href="#_6-2-1-é…ç½®è·¯å¾„åŸç†" aria-label="Permalink to &quot;6.2.1)é…ç½®è·¯å¾„åŸç†&quot;">â€‹</a></h6><blockquote><p>åœ¨nginxä¸­é…ç½®proxy_passä»£ç†è½¬å‘æ—¶ï¼Œå¦‚æœåœ¨proxy_passåé¢çš„urlåŠ /ï¼Œè¡¨ç¤ºç»å¯¹æ ¹è·¯å¾„ï¼›å¦‚æœæ²¡æœ‰/ï¼Œè¡¨ç¤ºç›¸å¯¹è·¯å¾„ï¼ŒæŠŠåŒ¹é…çš„è·¯å¾„éƒ¨åˆ†ä¹Ÿç»™ä»£ç†èµ°ã€‚</p></blockquote><p>å‡è®¾ä¸‹é¢å››ç§æƒ…å†µåˆ†åˆ«ç”¨ <a href="http://192.168.1.1/proxy/test.html" target="_blank" rel="noreferrer">http://192.168.1.1/proxy/test.html</a> è¿›è¡Œè®¿é—®:</p><h6 id="_6-2-1-ç¬¬ä¸€ç§æ–¹æ³•" tabindex="-1">6.2.1)ç¬¬ä¸€ç§æ–¹æ³•: <a class="header-anchor" href="#_6-2-1-ç¬¬ä¸€ç§æ–¹æ³•" aria-label="Permalink to &quot;6.2.1)ç¬¬ä¸€ç§æ–¹æ³•:&quot;">â€‹</a></h6><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>location /proxy/ {</span></span>
<span class="line"><span>    proxy_pass http://127.0.0.1/;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>ä»£ç†åˆ°URLï¼šhttp://127.0.0.1/test.html</span></span></code></pre></div><h6 id="_6-2-2-ç¬¬äºŒç§æ–¹æ³•-ç›¸å¯¹äºç¬¬ä¸€ç§-æœ€åå°‘ä¸€ä¸ª" tabindex="-1">6.2.2)ç¬¬äºŒç§æ–¹æ³•ï¼ˆç›¸å¯¹äºç¬¬ä¸€ç§ï¼Œæœ€åå°‘ä¸€ä¸ª / ï¼‰: <a class="header-anchor" href="#_6-2-2-ç¬¬äºŒç§æ–¹æ³•-ç›¸å¯¹äºç¬¬ä¸€ç§-æœ€åå°‘ä¸€ä¸ª" aria-label="Permalink to &quot;6.2.2)ç¬¬äºŒç§æ–¹æ³•ï¼ˆç›¸å¯¹äºç¬¬ä¸€ç§ï¼Œæœ€åå°‘ä¸€ä¸ª / ï¼‰:&quot;">â€‹</a></h6><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>location /proxy/ {</span></span>
<span class="line"><span>    proxy_pass http://127.0.0.1;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>ä»£ç†åˆ°URLï¼šhttp://127.0.0.1/proxy/test.html</span></span></code></pre></div><h6 id="_6-2-3-ç¬¬ä¸‰ç§æ–¹æ³•" tabindex="-1">6.2.3)ç¬¬ä¸‰ç§æ–¹æ³•: <a class="header-anchor" href="#_6-2-3-ç¬¬ä¸‰ç§æ–¹æ³•" aria-label="Permalink to &quot;6.2.3)ç¬¬ä¸‰ç§æ–¹æ³•:&quot;">â€‹</a></h6><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>location /proxy/ {</span></span>
<span class="line"><span>    proxy_pass http://127.0.0.1/aaa/;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>ä»£ç†åˆ°URLï¼šhttp://127.0.0.1/aaa/test.html</span></span></code></pre></div><h6 id="_6-2-4-ç¬¬å››ç§æ–¹æ³•-ç›¸å¯¹äºç¬¬ä¸‰ç§-æœ€åå°‘ä¸€ä¸ª" tabindex="-1">6.2.4)ç¬¬å››ç§æ–¹æ³•(ç›¸å¯¹äºç¬¬ä¸‰ç§ï¼Œæœ€åå°‘ä¸€ä¸ª / ï¼‰: <a class="header-anchor" href="#_6-2-4-ç¬¬å››ç§æ–¹æ³•-ç›¸å¯¹äºç¬¬ä¸‰ç§-æœ€åå°‘ä¸€ä¸ª" aria-label="Permalink to &quot;6.2.4)ç¬¬å››ç§æ–¹æ³•(ç›¸å¯¹äºç¬¬ä¸‰ç§ï¼Œæœ€åå°‘ä¸€ä¸ª / ï¼‰:&quot;">â€‹</a></h6><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>location /proxy/ {</span></span>
<span class="line"><span>    proxy_pass http://127.0.0.1/aaa;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>ä»£ç†åˆ°URLï¼šhttp://127.0.0.1/aaatest.html</span></span></code></pre></div><h4 id="_7-niginxé…ç½®æ–‡ä»¶åŠå…¶è·¨åŸŸåŸç†" tabindex="-1">7.Niginxé…ç½®æ–‡ä»¶åŠå…¶è·¨åŸŸåŸç†=&gt; <a class="header-anchor" href="#_7-niginxé…ç½®æ–‡ä»¶åŠå…¶è·¨åŸŸåŸç†" aria-label="Permalink to &quot;7.Niginxé…ç½®æ–‡ä»¶åŠå…¶è·¨åŸŸåŸç†=&gt;&quot;">â€‹</a></h4><h6 id="_1-serverè¡¨ç¤ºå¯åŠ¨ä¸€ä¸ªä»£ç†æœåŠ¡å™¨" tabindex="-1">â‘  serverè¡¨ç¤ºå¯åŠ¨ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ <a class="header-anchor" href="#_1-serverè¡¨ç¤ºå¯åŠ¨ä¸€ä¸ªä»£ç†æœåŠ¡å™¨" aria-label="Permalink to &quot;â‘  serverè¡¨ç¤ºå¯åŠ¨ä¸€ä¸ªä»£ç†æœåŠ¡å™¨&quot;">â€‹</a></h6><h6 id="_2-è¯¥ä»£ç†æœåŠ¡å™¨ä¹Ÿæ˜¯é™æ€æ–‡æœ-é™æ€æ–‡ä»¶è¦é€šè¿‡ä»£ç†æœåŠ¡å™¨æ¥è®¿é—®" tabindex="-1">â‘¡ è¯¥ä»£ç†æœåŠ¡å™¨ä¹Ÿæ˜¯é™æ€æ–‡æœ (é™æ€æ–‡ä»¶è¦é€šè¿‡ä»£ç†æœåŠ¡å™¨æ¥è®¿é—®) <a class="header-anchor" href="#_2-è¯¥ä»£ç†æœåŠ¡å™¨ä¹Ÿæ˜¯é™æ€æ–‡æœ-é™æ€æ–‡ä»¶è¦é€šè¿‡ä»£ç†æœåŠ¡å™¨æ¥è®¿é—®" aria-label="Permalink to &quot;â‘¡ è¯¥ä»£ç†æœåŠ¡å™¨ä¹Ÿæ˜¯é™æ€æ–‡æœ (é™æ€æ–‡ä»¶è¦é€šè¿‡ä»£ç†æœåŠ¡å™¨æ¥è®¿é—®)&quot;">â€‹</a></h6><pre><code>		   1)å› ä¸ºä»£ç†æœåŠ¡å™¨åªèƒ½ç›‘å¬ä»£ç†æœåŠ¡å™¨çš„ç«¯å£
				  2)æ‰€ä»¥å‰ç«¯å‘å‡ºçš„æ‰€æœ‰è¯·æ±‚ä¸€å®šæ˜¯åŸºäº80ç«¯å£å»å‘å‡º
	   			  3)è¿™æ ·å­,å‰ç«¯çš„æ‰€æœ‰è·¨åŸŸè¯·æ±‚æ‰å¯ä»¥è¢«ç›‘å¬åˆ°
				  4)æ‰èƒ½å®ç° å‰ç«¯å’Œä»£ç†æœåŠ¡å™¨ä¹‹é—´çš„ä¸è·¨åŸŸ
</code></pre><h6 id="_3-80-è¡¨ç¤ºç›‘å¬80ç«¯å£-æ‰€ä»¥æœ€ç»ˆæˆ‘ä»¬çš„å‰ç«¯èµ„æºä¸€å®šæ˜¯éƒ¨ç½²åœ¨80ç«¯å£ä¸Š" tabindex="-1">â‘¢ 80 è¡¨ç¤ºç›‘å¬80ç«¯å£ æ‰€ä»¥æœ€ç»ˆæˆ‘ä»¬çš„å‰ç«¯èµ„æºä¸€å®šæ˜¯éƒ¨ç½²åœ¨80ç«¯å£ä¸Š <a class="header-anchor" href="#_3-80-è¡¨ç¤ºç›‘å¬80ç«¯å£-æ‰€ä»¥æœ€ç»ˆæˆ‘ä»¬çš„å‰ç«¯èµ„æºä¸€å®šæ˜¯éƒ¨ç½²åœ¨80ç«¯å£ä¸Š" aria-label="Permalink to &quot;â‘¢ 80 è¡¨ç¤ºç›‘å¬80ç«¯å£ æ‰€ä»¥æœ€ç»ˆæˆ‘ä»¬çš„å‰ç«¯èµ„æºä¸€å®šæ˜¯éƒ¨ç½²åœ¨80ç«¯å£ä¸Š&quot;">â€‹</a></h6><pre><code>		    1)é€šè¿‡ç›¸å¯¹è·¯å¾„ html
		  		 2)é€šè¿‡ç»å¯¹è·¯å¾„  é™æ€æ–‡æœ
</code></pre><h6 id="_4-location-cross" tabindex="-1">â‘£ location /cross <a class="header-anchor" href="#_4-location-cross" aria-label="Permalink to &quot;â‘£ location /cross&quot;">â€‹</a></h6><pre><code>		  1)æœåŠ¡ç«¯çš„æ¥å£çš„uri ,ä¸ä¸€å®šè¦cross(è”æƒ³alias,å®ƒåªæ˜¯ä¸€ä¸ªè§„åˆ™,å¹¶æ²¡æœ‰è¡¨ç¤ºçœŸæ­£çš„æ„å›¾)
				     http://localhost/cross/cross åé¢çš„crossæ‰æ˜¯æˆ‘ä»¬æ­£è¦å»è®¿é—®çš„uri
</code></pre><h6 id="_5-proxy-pass" tabindex="-1">â‘¤ proxy_pass <a class="header-anchor" href="#_5-proxy-pass" aria-label="Permalink to &quot;â‘¤ proxy_pass&quot;">â€‹</a></h6><p>â€‹ 1) è¡¨ç¤ºæˆ‘ä»¬çœŸæ­£æƒ³è¦è¯·æ±‚çš„åœ°å€æ˜¯......</p><h6 id="_6-add-header" tabindex="-1">â‘¥ add_header <a class="header-anchor" href="#_6-add-header" aria-label="Permalink to &quot;â‘¥ add_header&quot;">â€‹</a></h6><pre><code>		   2) å°±æ˜¯æˆ‘ä»¬åœ¨è¯·æ±‚æˆåŠŸä¹‹å å“åº”å¤´è¦æ·»åŠ çš„å†…å®¹
</code></pre><h6 id="_7ç»ƒä¹ " tabindex="-1">â‘¦ç»ƒä¹ : <a class="header-anchor" href="#_7ç»ƒä¹ " aria-label="Permalink to &quot;â‘¦ç»ƒä¹ :&quot;">â€‹</a></h6><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> http://localhost:81/cross/cross/get  (è·¨åŸŸä¸æˆåŠŸ) ç«¯å£æ— æ³•ç›‘å¬åˆ°</span></span>
<span class="line"><span>  http://localhost:81/cross1/cross/get (è·¨åŸŸä¸æˆåŠŸ)æ‰¾ä¸åˆ°è·¯å¾„ä¸”ç«¯å£ä¹Ÿä¸æ­£ç¡®</span></span>
<span class="line"><span>  http://localhost:80/cross/cross/get  (è·¨åŸŸæˆåŠŸ)</span></span></code></pre></div><blockquote><p>author(æ´ªå‰æ—)2020_7_16~28ç¬”è®°</p></blockquote></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-d4a0bba5><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-d4a0bba5><span class="visually-hidden" id="doc-footer-aria-label" data-v-d4a0bba5>Pager</span><div class="pager" data-v-d4a0bba5><a class="VPLink link pager-link prev" href="/DocumentSite/serverend/README" data-v-d4a0bba5><!--[--><span class="desc" data-v-d4a0bba5>Previous page</span><span class="title" data-v-d4a0bba5>README</span><!--]--></a></div><div class="pager" data-v-d4a0bba5><a class="VPLink link pager-link next" href="/DocumentSite/serverend/Mysql/index" data-v-d4a0bba5><!--[--><span class="desc" data-v-d4a0bba5>Next page</span><span class="title" data-v-d4a0bba5>Mysql</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>As they floated in the breeze</p><p class="copyright" data-v-e315a0ad>Copyright Â© 2024-cheungchen</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"frontend_readme.md\":\"-YvMQEBJ\",\"frontend_react_index.md\":\"DyRolQEx\",\"index.md\":\"DrtaCLN5\",\"frontend_vue2_index.md\":\"BMZxNm4W\",\"serverend_mysql_index.md\":\"B9u0Wkng\",\"serverend_docker_index.md\":\"DUSXkyXV\",\"serverend_mongodb_index.md\":\"fod0cSWm\",\"frontend_vue3_index.md\":\"DTXPtbET\",\"serverend_mysql_mysql.md\":\"xaDnMgvr\",\"serverend_readme.md\":\"3AmGGUu9\",\"serverend_cloud-services_readme.md\":\"D7-SM6pF\",\"serverend_cloud-services_äº‘æœåŠ¡å™¨å®‰è£…nodeä¸mysqlç¯å¢ƒ_äº‘æœåŠ¡å™¨è¿›è¡Œnodeã€mysqlç¯å¢ƒçš„å®‰è£….md\":\"CZgkNXUz\",\"serverend_cloud-services_äº‘æœåŠ¡å™¨å®‰è£…nodeä¸mysqlç¯å¢ƒ_readme.md\":\"CqX0o2Tc\",\"serverend_nodejs_index.md\":\"DZF6ZfJD\",\"serverend_cloud-services_äº‘æœåŠ¡å™¨é€šè¿‡vncæ­å»ºubuntuå®‰è£…å›¾å½¢ç•Œé¢.md\":\"391ZSgDW\",\"serverend_cloud-services_é˜¿é‡Œäº‘centoséƒ¨ç½²vue_node(express)_mysql_é˜¿é‡Œäº‘éƒ¨ç½²é¡¹ç›®å…¨è¿‡ç¨‹.md\":\"BXU6W6xA\",\"serverend_cloud-services_åˆ©ç”¨äº‘æœåŠ¡å™¨æ­å»ºfrpå®ç°å†…ç½‘ç©¿é€.md\":\"BmCDB4DN\",\"tools_readme.md\":\"Bk5FdYkj\",\"tools_git_git-vim.md\":\"XTmW_g4w\",\"tools_git_index.md\":\"Dt65MLdS\",\"frontend_typescript_index.md\":\"BiAptxJ9\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"æ¸…ç™½ä¹‹æœˆ\",\"description\":\"ä½ æ˜¯å¦å¾—åˆ°äº†æœŸå¾…çš„äººç”Ÿ\",\"base\":\"/DocumentSite/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/hero-logo.svg\",\"siteTitle\":\"æ¸…ç™½ä¹‹æœˆ\",\"outline\":[1,6],\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"å‰ç«¯\",\"items\":[{\"text\":\"VUE 2.x\",\"link\":\"/frontend/Vue2/index.md\"},{\"text\":\"VUE 3.x\",\"link\":\"/frontend/Vue3/index.md\"},{\"text\":\"Typescript\",\"link\":\"/frontend/Typescript/index.md\"},{\"text\":\"React\",\"link\":\"/frontend/React/index.md\"}]},{\"text\":\"æœåŠ¡ç«¯\",\"items\":[{\"text\":\"Nodejs\",\"link\":\"serverend/Nodejs/index.md\"},{\"text\":\"Mongodb\",\"link\":\"/serverend/Mongodb/index.md\"},{\"text\":\"Mysql\",\"link\":\"/serverend/Mysql/index.md\"},{\"text\":\"Docker\",\"link\":\"/serverend/Docker/index.md\"},{\"text\":\"äº‘æœåŠ¡\",\"link\":\"/serverend/cloud-services/README.md\"}]},{\"text\":\"å·¥å…·ç±»\",\"items\":[{\"text\":\"Git\",\"link\":\"/tools/Git/index.md\"}]},{\"text\":\"å‰æ²¿æŠ€æœ¯\",\"link\":\"/\"},{\"text\":\"éšç¬”\",\"link\":\"/\"}],\"sidebar\":[{\"text\":\"å‰ç«¯\",\"collapsed\":false,\"items\":[{\"text\":\"README\",\"link\":\"/frontend/README.md\"},{\"text\":\"Vue 2.x\",\"link\":\"/frontend/Vue2/index.md\"},{\"text\":\"Vue 3.x\",\"link\":\"/frontend/Vue3/index.md\"},{\"text\":\"Typescript\",\"link\":\"/frontend/Typescript/index.md\"},{\"text\":\"React\",\"link\":\"/frontend/React/index.md\"}]},{\"text\":\"æœåŠ¡ç«¯\",\"collapsed\":false,\"items\":[{\"text\":\"README\",\"link\":\"/serverend/README.md\"},{\"text\":\"Nodejs\",\"link\":\"/serverend/Nodejs/index.md\"},{\"text\":\"Mysql\",\"items\":[{\"text\":\"Mysql\",\"link\":\"/serverend/Mysql/index.md\"},{\"text\":\"MysqlæŸ¥è¯¢\",\"link\":\"/serverend/Mysql/mysql.md\"}]},{\"text\":\"Mongodb\",\"link\":\"/serverend/Mongodb/index.md\"},{\"text\":\"Docker\",\"link\":\"/serverend/Docker/index.md\"},{\"text\":\"äº‘æœåŠ¡\",\"link\":\"/serverend/cloud-services/README.md\"}]},{\"text\":\"å·¥å…·ç±»\",\"collapsed\":false,\"items\":[{\"text\":\"README\",\"link\":\"/tools/README.md\"},{\"text\":\"Git\",\"items\":[{\"text\":\"Git\",\"link\":\"/tools/Git/index.md\"},{\"text\":\"Git/Vimå¸¸ç”¨å‘½ä»¤\",\"link\":\"/tools/Git/git-vim.md\"}]}]},{\"text\":\"å‰æ²¿æŠ€æœ¯\",\"collapsed\":false,\"items\":[]},{\"text\":\"éšç¬”\",\"collapsed\":false,\"items\":[]}],\"footer\":{\"message\":\"As they floated in the breeze\",\"copyright\":\"Copyright Â© 2024-cheungchen\"},\"socialLinks\":[{\"icon\":{\"svg\":\"<svg t=\\\"1713408687091\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1316 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"7801\\\" width=\\\"64\\\" height=\\\"64\\\"><path d=\\\"M643.181714 247.698286l154.916572-123.172572L643.181714 0.256 643.072 0l-154.660571 124.269714 154.660571 123.245715 0.109714 0.182857z m0 388.461714h0.109715l399.579428-315.245714-108.361143-87.04-291.218285 229.888h-0.146286l-0.109714 0.146285L351.817143 234.093714l-108.251429 87.04 399.433143 315.136 0.146286-0.146285z m-0.146285 215.552l0.146285-0.146286 534.893715-422.034285 108.397714 87.04-243.309714 192L643.145143 1024 10.422857 525.056 0 516.754286l108.251429-86.893715L643.035429 851.748571z\\\" fill=\\\"#1E80FF\\\" p-id=\\\"7802\\\"></path></svg>\"},\"link\":\"https://juejin.cn\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>